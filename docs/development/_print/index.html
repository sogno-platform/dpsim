<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><link rel=canonical type=text/html href=https://sogno-platform.github.io/dpsim/docs/development/><link rel=alternate type=application/rss+xml href=https://sogno-platform.github.io/dpsim/docs/development/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/dpsim/favicons/favicon.ico><link rel=apple-touch-icon href=/dpsim/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/dpsim/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/dpsim/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/dpsim/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/dpsim/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/dpsim/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/dpsim/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/dpsim/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/dpsim/favicons/android-192x192.png sizes=192x192><title>Development | DPsim</title><meta name=description content="How to extend DPsim.
"><meta property="og:title" content="Development"><meta property="og:description" content="How to extend DPsim.
"><meta property="og:type" content="website"><meta property="og:url" content="https://sogno-platform.github.io/dpsim/docs/development/"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Development"><meta itemprop=description content="How to extend DPsim.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Development"><meta name=twitter:description content="How to extend DPsim.
"><link rel=preload href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css as=style><link href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/dpsim/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/dpsim/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.a3a5471c48304c028f04ac9c5a81ddb9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/dpsim/docs/development/>Return to the regular view of this page</a>.</p></div><h1 class=title>Development</h1><div class=lead>How to extend DPsim.</div><ul><li>1: <a href=#pg-0f192be363f1a5dff02571fc2c1e1af3>Debugging</a></li><li>2: <a href=#pg-89779c401abdd82d81f06cac2455596e>Guidelines</a></li></ul><div class=content><h2 id=environment>Environment</h2><p>We recommend the following development tools:</p><ul><li>Editor: <a href=https://code.visualstudio.com>Visual Studio Code</a><ul><li>Extensions:<ul><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C/C++</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=vector-of-bool.cmake-tools">CMake Tools</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker">Docker</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig">EditorConfig for VS Code</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack">Remote Development</a></li></ul></li></ul></li><li><a href=https://www.docker.com>Docker</a></li><li><a href=https://cmake.org>CMake</a></li><li><a href=https://git-scm.com>Git</a></li></ul><p>Please follow the build instructions to checkout your code and install the basic dependencies and tools.</p></div></div><div class=td-content><h1 id=pg-0f192be363f1a5dff02571fc2c1e1af3>1 - Debugging</h1><h2 id=mixed-python-c-debugging>Mixed Python C++ Debugging</h2><h3 id=prerequisites>Prerequisites</h3><p>Your vscode launch.json should have two configurations, one to launch the python process and one to attach gdb:</p><pre><code>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Python: Current File&quot;,
            &quot;type&quot;: &quot;python&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;${file}&quot;,
            &quot;console&quot;: &quot;integratedTerminal&quot;,
            &quot;stopOnEntry&quot;: true,
            &quot;env&quot;: {&quot;PYTHONPATH&quot;: &quot;${workspaceFolder}/build${pathSeparator}${env:PYTHONPATH}&quot;}
        },
        {
            &quot;name&quot;: &quot;(gdb) Attach&quot;,
            &quot;type&quot;: &quot;cppdbg&quot;,
            &quot;request&quot;: &quot;attach&quot;,
            &quot;program&quot;: &quot;/usr/bin/python&quot;,
            &quot;processId&quot;: &quot;${command:pickProcess}&quot;,
            &quot;MIMode&quot;: &quot;gdb&quot;,
            &quot;setupCommands&quot;: [
                {
                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                    &quot;ignoreFailures&quot;: true
                }
            ]
        }        
    ]
}
</code></pre><p>The python debugger will stop on entry (&ldquo;stopOnEntry&rdquo;: true).
Make sure to adapt your PYTHONPATH variable if necessary.</p><p>The C++ code has to be build in debug mode</p><pre><code>cmake .. -DCMAKE_BUILD_TYPE=Debug 
</code></pre><h3 id=attaching-c-debugger>Attaching C++ Debugger</h3><ul><li>open the python example to be debugged</li><li>go to the debug menu and select / run the &ldquo;Python: Current File&rdquo; configuration</li><li>the python debugger should stop at entry</li><li>set C++ breakpoints</li><li>go to the debug menu and run the &ldquo;(gdb) Attach&rdquo; configuration</li><li>select a process… choose the python process with the “—adapter-access-token” part</li><li>you can view the whole description when you hover over the process with the mouse</li><li>press play to continue Python debugging… the c++ debugger will stop at the next breakpoint</li></ul><p>You can automate this by using the vscode extension “Python C++ Debugger” and by adding this configuration to the launch.json above:</p><pre><code>{
    &quot;name&quot;: &quot;Python C++ Debugger&quot;,
    &quot;type&quot;: &quot;pythoncpp&quot;,
    &quot;request&quot;: &quot;launch&quot;,
    &quot;pythonConfig&quot;: &quot;custom&quot;,
    &quot;pythonLaunchName&quot;: &quot;Python: Current File&quot;,
    &quot;cppConfig&quot;: &quot;default (gdb) Attach&quot;
}
</code></pre><p>This will automatically run both debuggers and select the current process.</p><p>It can take a while before the debugger hits the C++ breakpoints.</p><h2 id=c-debugging>C++ Debugging</h2><p>Use the following launch.json for vscode and set the program path:</p><pre><code>{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;(gdb) Launch&quot;,
            &quot;type&quot;: &quot;cppdbg&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;${workspaceFolder}/dpsim/build/Examples/Cxx/example&quot;, 
            &quot;args&quot;: [],
            &quot;stopAtEntry&quot;: true,
            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
            &quot;environment&quot;: [],
            &quot;externalConsole&quot;: false,
            &quot;MIMode&quot;: &quot;gdb&quot;,
            &quot;setupCommands&quot;: [
                {
                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,
                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,
                    &quot;ignoreFailures&quot;: true
                }
            ]
        }
    ]
}</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-89779c401abdd82d81f06cac2455596e>2 - Guidelines</h1><p>This is a summary of general guidelines for the development of DPsim.</p><h2 id=scaling-of-voltages-and-currents>Scaling of Voltages and Currents</h2><p>Voltage quantities are expressed either as phase-to-phase RMS values (denominated as <code>RMS3PH</code>) or as phase-to-ground peak values (denominated as <code>PEAK1PH</code>):</p><ul><li>Initialisation quantities (e.g. <code>initialSingleVoltage</code> of <code>SimPowerComp</code>) as <code>RMS3PH</code> values</li><li>Simulation quantities in both <code>SP</code> and <code>DP</code> domain (e.g. <code>mIntfVoltage</code> of <code>DP::Ph1::PiLine</code>) as <code>RMS3PH values</code></li><li>Simulation quantities in the <code>EMT</code> domain (e.g. <code>mIntfVoltage</code> of <code>EMT::Ph3::Transformer</code>) as <code>PEAK1PH</code> values</li></ul><p>Current quantities are expressed either as <code>RMS</code> or as <code>PEAK</code> values:</p><ul><li>Simulation quantities in both <code>SP</code> and <code>DP</code> domain (e.g. <code>mIntfCurrent</code> of <code>DP::Ph1::PiLine</code>) as <code>RMS</code> values</li><li>Simulation quantities in the <code>EMT</code> domain (e.g. <code>mIntfCurrent</code> of <code>EMT::Ph3::Transformer</code>) as <code>PEAK</code> values</li></ul><h2 id=logging>Logging</h2><p>Debug or trace should be the default log level for information that might be nice to have but not necessary for every simulation case.</p><p>Calls to the logger that might occur during simulation must use spdlog macros, like SPDLOG_LOGGER_INFO.</p><h2 id=creating-new-releases>Creating New Releases</h2><p>Although DPsim currently does not have any conventions on versioning, the periodic creation of
new versions can help to mark significant changes and to analyze new portions of code using tools like SonarCloud.</p><p>A new version of DPsim has to be indicated as follows:</p><ul><li>Create a new tag with an increased version number</li><li>Update setup.cfg</li><li>Update CMakeLists.txt</li><li>Update sonar-project.properties</li></ul><p>Due to the creation of a new tag, a new PyPi package will be deployed automatically.
To release an updated Docker image, the container workflow needs to be triggered manually.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://slack.lfenergy.org/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="GitHub Discussions" aria-label="GitHub Discussions"><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank rel=noopener href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim aria-label="RWTH GitLab"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})'></script><script src=/dpsim/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/dpsim/js/tabpane-persist.js></script></body></html>