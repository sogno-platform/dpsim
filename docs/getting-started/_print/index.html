<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><link rel=canonical type=text/html href=https://sogno-platform.github.io/dpsim/docs/getting-started/><link rel=alternate type=application/rss+xml href=https://sogno-platform.github.io/dpsim/docs/getting-started/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/dpsim/favicons/favicon.ico><link rel=apple-touch-icon href=/dpsim/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/dpsim/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/dpsim/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/dpsim/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/dpsim/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/dpsim/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/dpsim/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/dpsim/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/dpsim/favicons/android-192x192.png sizes=192x192><title>Getting Started | DPsim</title><meta name=description content="How to install, build and run the DPsim project.
"><meta property="og:title" content="Getting Started"><meta property="og:description" content="How to install, build and run the DPsim project.
"><meta property="og:type" content="website"><meta property="og:url" content="https://sogno-platform.github.io/dpsim/docs/getting-started/"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Getting Started"><meta itemprop=description content="How to install, build and run the DPsim project.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting Started"><meta name=twitter:description content="How to install, build and run the DPsim project.
"><link rel=preload href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css as=style><link href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/dpsim/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/dpsim/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.aec3e98d8880ba93d5e1bb2859962a13.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/dpsim/docs/getting-started/>Return to the regular view of this page</a>.</p></div><h1 class=title>Getting Started</h1><div class=lead>How to install, build and run the DPsim project.</div><ul><li>1: <a href=#pg-5a3aec5a5353023bd812895a342e75bc>Real-Time</a></li><li>2: <a href=#pg-b270223ad6f3e1090632b01326b6fde0>Build</a></li><li>3: <a href=#pg-f085d0d6d0675180d3331caca3265de5>Install</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-5a3aec5a5353023bd812895a342e75bc>1 - Real-Time</h1><p>This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.</p><p>DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system.
However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds.
This is due to operating system noise and other processes interfering with the simulation.
With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode.
Synchronizing the time step to an external source is only necessary, when very high time step accuracy, with maximum deviations in the nanoseconds, is required.</p><h1 id=operating-system-and-kernel>Operating System and Kernel</h1><p>Using a Linux kernel with the <code>PREEMPT_RT</code> feature improves latency when issuing system calls and enables the FIFO scheduler that lets us avoid preemption during the real-time simulation.</p><p>Most distributions offer a binary package for a <code>PREEMPT_RT</code> enabled kernel. For example on Rocky Linux:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dnf --enablerepo<span style=color:#ce5c00;font-weight:700>=</span>rt install kernel-rt kernel-rt-devel
</span></span></code></pre></div><p>More aggressive tuning can involve isolating a set of cores for exclusive use by the real-time simulation.
This way, the kernel will not schedule any processes on these cores.
Add the kernel parameters <code>isolcpus</code> and <code>nohz_full</code> using, for example, <code>grubby</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo grubby --update-kernel<span style=color:#ce5c00;font-weight:700>=</span>ALL --args<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;isolcpus=9,11,13,15 nohz_full=9,11,13,15&#34;</span>
</span></span></code></pre></div><p>Something similar, but less invasive and non-permanent can be achieved using <code>tuna</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tuna isolate -c 9,11,13,15
</span></span></code></pre></div><p>To avoid real-time throttling to cause overruns disable this feature:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo bash -c <span style=color:#4e9a06>&#34;echo -1 &gt; /proc/sys/kernel/sched_rt_runtime_us&#34;</span>
</span></span></code></pre></div><p>Note that this is not persistent when rebooting.</p><h1 id=simulation-model-tuning>Simulation Model Tuning</h1><p>Real time capable models cannot issue any system calls during simulation as the context switch to the kernel introduces unacceptable latencies.
This means models cannot allocate memory, use mutexes or other interrupt-driven synchronization primitives, read or write data from files.
You should turn off logging, when time steps in the low milliseconds are desired.
There is a <code>RealTimeDataLogger</code> that can be used to output simulation results in these cases.
Note however, that this logger pre-allocated the memory required for all of the logging required during simulations.
Your machine may run out of memory, when the simulation is long or you log too many signals.</p><p>You can increase the performance of your simulation by adding the <code>-flto</code> and <code>-march=native</code> compiler flags:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:navy;font-weight:700>diff --git a/CMakeLists.txt b/CMakeLists.txt
</span></span></span><span style=display:flex><span><span style=color:navy;font-weight:700>index 8801cbe8d..4a2843269 100644
</span></span></span><span style=display:flex><span><span style=color:navy;font-weight:700></span><span style=color:#a40000>--- a/CMakeLists.txt
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#00a000>+++ b/CMakeLists.txt
</span></span></span><span style=display:flex><span><span style=color:#00a000></span><span style=color:purple;font-weight:700>@@ -79,7 +79,7 @@ include(CheckSymbolExists)
</span></span></span><span style=display:flex><span><span style=color:purple;font-weight:700></span> check_symbol_exists(timerfd_create sys/timerfd.h HAVE_TIMERFD)
</span></span><span style=display:flex><span> check_symbol_exists(getopt_long getopt.h HAVE_GETOPT)
</span></span><span style=display:flex><span> if(CMAKE_BUILD_TYPE STREQUAL &#34;Release&#34; OR CMAKE_BUILD_TYPE STREQUAL &#34;RelWithDebInfo&#34;)
</span></span><span style=display:flex><span><span style=color:#a40000>-       add_compile_options(-Ofast)
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#00a000>+       add_compile_options(-Ofast -flto -march=native)
</span></span></span><span style=display:flex><span><span style=color:#00a000></span> endif()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> # Get version info and buildid from Git
</span></span></code></pre></div><h1 id=running-a-real-time-simulation>Running a Real-Time Simulation</h1><p>Before running a simulation, you can run the following commands as root:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;evacuating cores&#34;</span>
</span></span><span style=display:flex><span>tuna isolate -c 9,11,13,15
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;disabling RT throttling&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87>echo</span> -1 &gt; /proc/sys/kernel/sched_rt_runtime_us
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;stopping systemd services&#34;</span>
</span></span><span style=display:flex><span>systemctl stop polkit
</span></span><span style=display:flex><span>systemctl stop containerd
</span></span><span style=display:flex><span>systemctl stop crond
</span></span><span style=display:flex><span>systemctl stop chronyd
</span></span></code></pre></div><p>As a reference, real-time simulation examples are provided in the <code>dpsim/examples/cxx</code> and <code>dpsim-villas/examples/cxx</code> folder of the DPsim repository.</p><p>To benefit from the <code>PREEMPT_RT</code> feature and the isolated cores, the simulation has to be started using the <code>chrt</code> command to set the scheduling policy and priority, and the <code>taskset</code> command to pin the process to the isolated cores.</p><ul><li><a href=http://man7.org/linux/man-pages/man1/chrt.1.html>chrt man-page</a></li><li><a href=http://man7.org/linux/man-pages/man1/taskset.1.html>taskset man-page</a></li></ul><p>In the following example, we set the FIFO scheduling policy with the highest priority (99) and pin the execution of the simulation to CPU cores 9,11,13,15 which have been reserved previously (see above).</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># the simple RT_DP_CS_R_1 simulation</span>
</span></span><span style=display:flex><span>taskset -c 9,11,13,15 chrt -f <span style=color:#0000cf;font-weight:700>99</span> build/dpsim/examples/cxx/RT_DP_CS_R_1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Cosimulation using VILLASnode, FPGA synchronized time step, and exchanging data via Aurora interface.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Here we need sudo, to interact with the FPGA. We disable logging (log=false) and set the time step to 50 us (-t 0.00005).</span>
</span></span><span style=display:flex><span>sudo taskset -c 9,11,13,15 chrt -f <span style=color:#0000cf;font-weight:700>99</span> build/dpsim-villas/examples/cxx/FpgaCosim3PhInfiniteBus -o <span style=color:#000>log</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>false</span> -t 0.00005 -d <span style=color:#0000cf;font-weight:700>10</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b270223ad6f3e1090632b01326b6fde0>2 - Build</h1><h1 id=docker-based>Docker based</h1><p>Clone the repository</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone git@github.com:sogno-platform/dpsim.git
</span></span></code></pre></div><p>or using https if you do not have an account</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone https://github.com/sogno-platform/dpsim.git
</span></span></code></pre></div><p>In the repository, there is a Docker file with all required dependencies</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> dpsim
</span></span><span style=display:flex><span>docker build -t sogno/dpsim:dev -f packaging/Docker/Dockerfile.dev .
</span></span></code></pre></div><p>Alternatively, the image can be pulled from DockerHub like so</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker pull sogno/dpsim:dev
</span></span></code></pre></div><p>For OS specific instructions on how to install requirements, see the sections below.</p><p>Next, run a Docker container</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> dpsim
</span></span><span style=display:flex><span>docker run -it -p 8888:8888 -v <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>:/dpsim --privileged sogno/dpsim:dev bash
</span></span></code></pre></div><p>The option <code>-p</code> maps the port 8888 of the container to the docker host. This is required to access the jupyter lab instance inside the container. The option <code>--privileged</code> is required for debug builds.</p><p>For Windows, you might need to specify the current directory with curly brackets</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker run -it -p 8888:8888 -v <span style=color:#4e9a06>${</span><span style=color:#000>pwd</span><span style=color:#4e9a06>}</span>:/dpsim --privileged sogno/dpsim:dev bash
</span></span></code></pre></div><p>Now, you should be in an interactive session inside the docker container.</p><p>The DPsim C++ and Python library without C++ examples or documentation can be built as follows</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> /dpsim
</span></span><span style=display:flex><span>mkdir build <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>cmake --build . --target dpsimpy
</span></span></code></pre></div><p>If you need other libraries that are not built by default, you need to target them specifically, for example if you need `dpsimpy´ and ´dpsimpyvillas´:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cmake --build . --target dpsimpy dpsimpyvillas
</span></span></code></pre></div><p>To build everything run</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cmake --build .
</span></span></code></pre></div><p>To use other libraries that are installed, use the relevant option defined in the CMakeList.txt files, for example for GSL below, and then build as usual:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cmake .. -DWITH_GSL<span style=color:#ce5c00;font-weight:700>=</span>ON
</span></span></code></pre></div><p>If you would like to use the Python package, it has to be added to the path.
The following command adds the dpsimpy C++/Python package as well as the dpsim pure Python package.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> /dpsim/build
</span></span><span style=display:flex><span><span style=color:#204a87>export</span> <span style=color:#000>PYTHONPATH</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>:<span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>/../python/src/
</span></span></code></pre></div><p>If you are using <code>conda</code> or other ways to develop with environments, please keep in mind that this will become specific for your setup. For this case, from within the environment already active:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> /dpsim/build
</span></span><span style=display:flex><span>conda develop <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> conda develop <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>/Source/Python <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> conda develop <span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span>/../Source/Python
</span></span></code></pre></div><p>To run JupyterLab</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> /dpsim
</span></span><span style=display:flex><span>jupyter lab --ip<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;0.0.0.0&#34;</span> --allow-root --no-browser
</span></span></code></pre></div><p>To install DPsim run</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> /dpsim/build
</span></span><span style=display:flex><span>sudo make install
</span></span></code></pre></div><h1 id=cmake-for-linux>CMake for Linux</h1><p>The most recent list of requirements can be found in the Dockerfiles.</p><p>Make sure that the required dependencies are installed.
The <a href=https://github.com/sogno-platform/dpsim/blob/c40e283338574e0ba7cd9861c70f1e41aa3399ba/packaging/Shell/install-fedora-deps.sh>fedora installation script</a> in the DPsim repository is a good place to start from.</p><p><strong>Note:</strong> There are currently no Debian packages for <code>villas-node</code> and <code>libcimpp16v29a</code>.
If you want to use these optional feature, you have to build them manually.</p><p>Install Sundials</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone --branch v3.1.1 https://github.com/LLNL/sundials.git
</span></span><span style=display:flex><span>mkdir sundials/build
</span></span><span style=display:flex><span><span style=color:#204a87>pushd</span> sundials/build
</span></span><span style=display:flex><span>cmake .. <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    -DBUILD_SHARED_LIBS<span style=color:#ce5c00;font-weight:700>=</span>ON <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    -DBUILD_STATIC_LIBS<span style=color:#ce5c00;font-weight:700>=</span>OFF <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    -DEXAMPLES_ENABLE_C<span style=color:#ce5c00;font-weight:700>=</span>OFF
</span></span><span style=display:flex><span>make -j<span style=color:#204a87;font-weight:700>$(</span>nproc<span style=color:#204a87;font-weight:700>)</span> install
</span></span><span style=display:flex><span><span style=color:#204a87>popd</span>
</span></span></code></pre></div><p>The following steps to clone, build and install are the same as for the Docker setup.</p><h1 id=cmake-for-windows>CMake for Windows</h1><p>Make sure that the required dependecies are installed:</p><ul><li>Visual Studio 2017 with C++ Desktop development package</li><li><a href=https://cmake.org/>CMake</a> for Windows</li><li><a href=https://git-scm.com/download/win>Git for Windows</a></li><li>For Python support, install Python3, for example, Anaconda, and add Python to your PATH.</li></ul><p>Clone the project as explained for Docker.</p><p>Open a windows command prompt and navigate into the new DPsim folder.
Generate a Visual Studio project with CMake and use it to build the project</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir build
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> build
</span></span><span style=display:flex><span>cmake -G <span style=color:#4e9a06>&#34;Visual Studio 15 2017 Win64&#34;</span> ..
</span></span></code></pre></div><p>Open Visual Studio and load the Visual Studio project from the build directory within the DPsim folder.</p><p>You can either build the project from within Visual Studio or from the command line by running the following command in the windows command prompt</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cmake --build .
</span></span></code></pre></div><p>To install the Python package use Visual Studio and the Release configuration to build the DPsim Python module and then build the INSTALL project.</p><h1 id=cmake-for-macos>CMake for macOS</h1><p>Make sure that the required dependencies are installed</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>/usr/bin/ruby -e <span style=color:#4e9a06>&#34;</span><span style=color:#204a87;font-weight:700>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span>
</span></span><span style=display:flex><span>brew install gcc9 git cmake graphviz python3 gsl eigen spdlog
</span></span><span style=display:flex><span>sudo pip3 install numpy
</span></span></code></pre></div><p>Clone the source as explained for the Docker setup.</p><p>Compile</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>make -j<span style=color:#204a87;font-weight:700>$(</span>sysctl -n hw.ncpu<span style=color:#204a87;font-weight:700>)</span>
</span></span></code></pre></div><p>To install the generated Python module to your system</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo make install
</span></span></code></pre></div><h1 id=python-package-for-pypi>Python Package for pypi</h1><p>Follow the previous steps to set up the Docker container.</p><p>To build the Python package run</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 setup.py bdist_wheel
</span></span></code></pre></div><h2 id=nix>Nix</h2><p>DPsim can be fully build using <a href=https://nixos.org/>Nix</a>, a declarative package manager for building software reproducible.</p><p>The following steps require a working single-user or multi-user installation of Nix, but not necessarily NixOS.</p><p>DPsim uses Nix&rsquo;s experimental Flake feature which needs to be activated:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;experimental-features=nix-command flakes&#34;</span> &gt; ~/.config/nix/nix.conf
</span></span></code></pre></div><p>Building DPsim, including all its dependencies can be done by running:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>nix build github:sogno-platform/dpsim
</span></span></code></pre></div><p>The build result will be available within the <code>result</code> folder of your current directory.</p><p>For development purposes, a local development environment can be setup by you running:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>nix develop github:sogno-platform/dpsim
</span></span></code></pre></div><p>Please note, that the Flake reference above (<code>github:sogno-platform/dpsim</code>) can be substituted by a local path (<code>.</code>), in case you have locally checked out the DPsim repo.</p><h1 id=documentation>Documentation</h1><h2 id=python>Python</h2><p>Install <a href=https://www.sphinx-doc.org/en/master/>Sphinx</a> or use the Docker image.</p><p>Generate the Python documentation by running Sphinx via CMake:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir -p build <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>make docs
</span></span></code></pre></div><p>The resulting documentation will be generated in <code>Documentation/html/</code>.</p><h2 id=c>C++</h2><p>Install <a href=http://www.doxygen.nl/>Doxygen</a> or use the Docker image.</p><p>Generate the C++ documentation by running Doxygen via CMake:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir -p build <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>make docs_cxx
</span></span></code></pre></div><p>The resulting documentation will be generated in <code>Documentation/html/Cxx</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f085d0d6d0675180d3331caca3265de5>3 - Install</h1><p>DPsim is a Python module / C++ library for complex power system
simulation. As a Python module, the easiest way to get to know DPsim is
via <a href=https://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/>Jupyter Notebooks</a>.</p><h1 id=docker>Docker</h1><p>First, you need to install <a href=https://docs.docker.com/install/>Docker</a>.
Then, you could either build a docker image by yourself as described in the build instructions or download a prepared image from Docker Hub as described in the following.</p><p>To start a Jupyter session, run a DPsim Docker container</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker run -p 8888:8888 sogno/dpsim
</span></span></code></pre></div><p>And access the session by opening the following link: <a href="http://localhost:8888/lab?token=3adaa57df44cea75e60c0169e1b2a98ae8f7de130481b5bc">http://localhost:8888/lab?token=3adaa57df44cea75e60c0169e1b2a98ae8f7de130481b5bc</a></p><h1 id=python-in-linux>Python in Linux</h1><p>DPsim can be installed in Linux as a Python module:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install dpsim
</span></span></code></pre></div><h2 id=prerequisites>Prerequisites</h2><p>First, you need to make sure that Python is installed and your version is compatible.
An easy way to install Python and all required packages is the <a href=https://www.anaconda.com/>Anaconda distribution</a>.
To get started, install the latest installer for Python 3.x from the <a href=https://www.anaconda.com/download/>downloads section</a>.
Then, run the Anaconda Prompt and create a new conda environment:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>conda create -n dpsim <span style=color:#000>python</span><span style=color:#ce5c00;font-weight:700>=</span>3.13
</span></span></code></pre></div><p>After creating the environment you need to make sure that it is activated.
The current environment is displayed at the beginning of the command line in brackets.
It should read <em>"(dpsim)&mldr;"</em>.
In case it is not activated, run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>activate dpsim
</span></span></code></pre></div><h2 id=pip-package-installation>Pip Package Installation</h2><p>Then, DPsim can be installed as a Python module in Linux:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install dpsim
</span></span></code></pre></div><p>Some examples also need additional packages to process the data or show graphics. Please have a look at the import section of them in case you run into any errors.</p><h1 id=from-source>From Source</h1><p>To build and install DPsim from the source files, please refer to the build section.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://slack.lfenergy.org/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="GitHub Discussions" aria-label="GitHub Discussions"><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank rel=noopener href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim aria-label="RWTH GitLab"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})'></script><script src=/dpsim/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/dpsim/js/tabpane-persist.js></script></body></html>