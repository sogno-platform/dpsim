<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/dpsim/favicons/favicon.ico><link rel=apple-touch-icon href=/dpsim/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/dpsim/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/dpsim/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/dpsim/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/dpsim/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/dpsim/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/dpsim/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/dpsim/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/dpsim/favicons/android-192x192.png sizes=192x192><title>Subcomponent Handling | DPsim</title><meta name=description content="In DPsim, there are many components which can be broken down into individual subcomponents. Examples are the PiLine, consisting of an inductor, three resistors, and two capacitors, or the NetworkInjection which contains a voltage source. On the C++ class level, these subcomponents are represented by member variables within the larger component class. In this guide, all components which have subcomponents are called composite components.
Creating Composite Components While normal components are usually subclasses of SimPowerComp&amp;lt;T&amp;gt; or MNASimPowerComp&amp;lt;T&amp;gt;, there exists a special base class for composite components called CompositePowerComp&amp;lt;T&amp;gt;."><meta property="og:title" content="Subcomponent Handling"><meta property="og:description" content="In DPsim, there are many components which can be broken down into individual subcomponents. Examples are the PiLine, consisting of an inductor, three resistors, and two capacitors, or the NetworkInjection which contains a voltage source. On the C++ class level, these subcomponents are represented by member variables within the larger component class. In this guide, all components which have subcomponents are called composite components.
Creating Composite Components While normal components are usually subclasses of SimPowerComp<T> or MNASimPowerComp<T>, there exists a special base class for composite components called CompositePowerComp<T>."><meta property="og:type" content="article"><meta property="og:url" content="https://sogno-platform.github.io/dpsim/docs/overview/subcomponents/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2022-12-14T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-19T09:13:55+02:00"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Subcomponent Handling"><meta itemprop=description content="In DPsim, there are many components which can be broken down into individual subcomponents. Examples are the PiLine, consisting of an inductor, three resistors, and two capacitors, or the NetworkInjection which contains a voltage source. On the C++ class level, these subcomponents are represented by member variables within the larger component class. In this guide, all components which have subcomponents are called composite components.
Creating Composite Components While normal components are usually subclasses of SimPowerComp<T> or MNASimPowerComp<T>, there exists a special base class for composite components called CompositePowerComp<T>."><meta itemprop=datePublished content="2022-12-14T00:00:00+00:00"><meta itemprop=dateModified content="2025-05-19T09:13:55+02:00"><meta itemprop=wordCount content="625"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Subcomponent Handling"><meta name=twitter:description content="In DPsim, there are many components which can be broken down into individual subcomponents. Examples are the PiLine, consisting of an inductor, three resistors, and two capacitors, or the NetworkInjection which contains a voltage source. On the C++ class level, these subcomponents are represented by member variables within the larger component class. In this guide, all components which have subcomponents are called composite components.
Creating Composite Components While normal components are usually subclasses of SimPowerComp<T> or MNASimPowerComp<T>, there exists a special base class for composite components called CompositePowerComp<T>."><link rel=preload href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css as=style><link href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/dpsim/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/dpsim/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.31f486977b610cddaaea15472137aabf.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.31f486977b610cddaaea15472137aabf.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-dpsimdocs-li><a href=/dpsim/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-dpsimdocs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-dpsimdocsoverview-li><a href=/dpsim/docs/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsoverview><span>Overview</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsoverviewarchitecture-li><a href=/dpsim/docs/overview/architecture/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewarchitecture><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsoverviewattributes-li><a href=/dpsim/docs/overview/attributes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewattributes><span>Attributes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsoverviewscheduling-li><a href=/dpsim/docs/overview/scheduling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewscheduling><span>Scheduling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsoverviewinterfaces-li><a href=/dpsim/docs/overview/interfaces/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewinterfaces><span>Interfaces</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsoverviewmnainterface-li><a href=/dpsim/docs/overview/mnainterface/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewmnainterface><span>Interfacing with the MNA Solver</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-dpsimdocsoverviewsubcomponents-li><a href=/dpsim/docs/overview/subcomponents/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsoverviewsubcomponents><span class=td-sidebar-nav-active-item>Subcomponent Handling</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-dpsimdocsgetting-started-li><a href=/dpsim/docs/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsgetting-started><span>Getting Started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsgetting-startedreal-time-li><a href=/dpsim/docs/getting-started/real-time/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsgetting-startedreal-time><span>Real-Time</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsgetting-startedbuild-li><a href=/dpsim/docs/getting-started/build/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsgetting-startedbuild><span>Build</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsgetting-startedinstall-li><a href=/dpsim/docs/getting-started/install/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsgetting-startedinstall><span>Install</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-dpsimdocsconcepts-li><a href=/dpsim/docs/concepts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsconcepts><span>Concepts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsconceptsdyn-phasors-li><a href=/dpsim/docs/concepts/dyn-phasors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsconceptsdyn-phasors><span>Dynamic Phasors</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsconceptsnodal-analysis-li><a href=/dpsim/docs/concepts/nodal-analysis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsconceptsnodal-analysis><span>Nodal Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsconceptspowerflow-li><a href=/dpsim/docs/concepts/powerflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsconceptspowerflow><span>Powerflow</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-dpsimdocsdevelopment-li><a href=/dpsim/docs/development/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsdevelopment><span>Development</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsdevelopmentdebugging-li><a href=/dpsim/docs/development/debugging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsdevelopmentdebugging><span>Debugging</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsdevelopmentguidelines-li><a href=/dpsim/docs/development/guidelines/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsdevelopmentguidelines><span>Guidelines</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-dpsimdocsmodels-li><a href=/dpsim/docs/models/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsmodels><span>Models</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelstransformer-li><a href=/dpsim/docs/models/transformer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelstransformer><span>Transformer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelsbranches-li><a href=/dpsim/docs/models/branches/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelsbranches><span>Branches</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelsinduction-machine-li><a href=/dpsim/docs/models/induction-machine/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelsinduction-machine><span>Induction Machine</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelsrlc-elements-li><a href=/dpsim/docs/models/rlc-elements/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelsrlc-elements><span>RLC-Elements</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelssynchronous-generator-li><a href=/dpsim/docs/models/synchronous-generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelssynchronous-generator><span>Synchronous Generator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsmodelspower-electronics-li><a href=/dpsim/docs/models/power-electronics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsmodelspower-electronics><span>VS-Inverter</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-dpsimdocstasks-li><a href=/dpsim/docs/tasks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocstasks><span>Core Tasks</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocstasksadd-model-li><a href=/dpsim/docs/tasks/add-model/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocstasksadd-model><span>Add New Model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocstaskscreate-simulation-li><a href=/dpsim/docs/tasks/create-simulation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocstaskscreate-simulation><span>Create New Simulation</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsexamples-li><a href=/dpsim/docs/examples/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-dpsimdocsexamples><span>Examples</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsroadmap-li><a href=/dpsim/docs/roadmap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsroadmap><span>Roadmap</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocsreference-li><a href=/dpsim/docs/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocsreference><span>Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-dpsimdocscontribution-guidelines-li><a href=/dpsim/docs/contribution-guidelines/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-dpsimdocscontribution-guidelines><span>Contribution Guidelines</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/sogno-platform/dpsim/tree/master/content/en/docs/Overview/subcomponents.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/sogno-platform/dpsim/edit/master/content/en/docs/Overview/subcomponents.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/sogno-platform/dpsim/new/master/content/en/docs/Overview/subcomponents.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/sogno-platform/dpsim/issues/new?title=Subcomponent%20Handling" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/sogno-platform/dpsim/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=https://sogno-platform.github.io/dpsim/docs/overview/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://sogno-platform.github.io/dpsim/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://sogno-platform.github.io/dpsim/docs/overview/>Overview</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://sogno-platform.github.io/dpsim/docs/overview/subcomponents/ aria-disabled=true class="btn-link disabled">Subcomponent Handling</a></li></ol></nav><div class=td-content><h1>Subcomponent Handling</h1><header class=article-meta></header><p>In DPsim, there are many components which can be broken down into individual subcomponents. Examples are the <code>PiLine</code>, consisting of an inductor, three resistors, and two capacitors, or the <code>NetworkInjection</code> which contains a voltage source.
On the C++ class level, these subcomponents are represented by member variables within the larger component class. In this guide, all components which have subcomponents are called <strong>composite components</strong>.</p><h1 id=creating-composite-components>Creating Composite Components</h1><p>While normal components are usually subclasses of <code>SimPowerComp&lt;T></code> or <code>MNASimPowerComp&lt;T></code>, there exists a special base class for composite
components called <code>CompositePowerComp&lt;T></code>. This class provides multiple methods and parameters for configuring how the subcomponents should be
handled with respect to the <code>MNAPreStep</code> and <code>MNAPostStep</code> tasks.
The main idea here is that the subcomponents do not register their own MNA tasks, but instead their MNA methods like <code>mnaPreStep</code> and <code>mnaPostStep</code> are called explicitly in the tasks of the composite component.
In the constructor of <code>CompositePowerComp&lt;T></code>, the parameters <code>hasPreStep</code> and <code>hasPostStep</code> can
be set to automatically create and register a <code>MNAPreStep</code> or <code>MNAPostStep</code> task that will call the <code>mnaCompPreStep</code> or <code>mnaCompPostStep</code> method on execution.
Additionally, all subcomponents should be registered as soon as they are created using the <code>addMNASubComponent</code>-method. This method takes
multiple parameters defining how and in what order the subcomponent&rsquo;s pre- and post- steps should be called, as well as if the subcomponent
should be stamped into the system <code>rightVector</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// DP_Ph1_PiLine.cpp
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>uid</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>String</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Logger</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Level</span> <span style=color:#000>logLevel</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>Base</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mAttributes</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Call the constructor of CompositePowerComp and enable automatic pre- and post-step creation
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>CompositePowerComp</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>Complex</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uid</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>logLevel</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>//...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>initializeFromNodesAndTerminals</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Real</span> <span style=color:#000>frequency</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>//...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// Create series sub components
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>mSubSeriesResistor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>make_shared</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Resistor</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000>mName</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_res&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>mLogLevel</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Setup mSubSeriesResistor...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Register the resistor as a subcomponent. The resistor&#39;s pre- and post-step will be called before the pre- and post-step of the parent,
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// and the resistor does not contribute to the `rightVector`.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>addMNASubComponent</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mSubSeriesResistor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MNA_SUBCOMP_TASK_ORDER</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TASK_BEFORE_PARENT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MNA_SUBCOMP_TASK_ORDER</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TASK_BEFORE_PARENT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>false</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#000>mSubSeriesInductor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>make_shared</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Inductor</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000>mName</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_ind&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>mLogLevel</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Setup mSubSeriesInductor...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Register the inductor as a subcomponent. The inductor&#39;s pre- and post-step will be called before the pre- and post-step of the parent,
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// and the inductor does contribute to the `rightVector`.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>addMNASubComponent</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mSubSeriesInductor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MNA_SUBCOMP_TASK_ORDER</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TASK_BEFORE_PARENT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MNA_SUBCOMP_TASK_ORDER</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TASK_BEFORE_PARENT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>true</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>//...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h1 id=orchestrating-mna-method-calls>Orchestrating MNA Method Calls</h1><p>By choosing which methods to override in the composite component class, subcomponent handling can either be offloaded to the <code>CompositePowerComp</code> base class or manually implemented in the new component class. By default, <code>CompositePowerComp</code> provides all
methods demanded by <code>MNAInterface</code> in such a way that the subcomponents&rsquo; MNA-methods are properly called. To also allow for the composite
component class to perform further actions in these MNA-methods, there exist multiple methods prefixed with <code>mnaParent</code>, e.g. <code>mnaParentPreStep</code> or <code>mnaParentAddPostStepDependencies</code>.
These parent methods will usually be called after the respective method has been called on the subcomponents. For the <code>mnaPreStep</code> and
<code>mnaPostStep</code> methods, this behavior can be set explicitly in the <code>addMNASubComponent</code> method.</p><p>If a composite component requires a completely custom implementation of some MNA-method, e.g. for skipping certain subcomponents or for
calling the subcomponent&rsquo;s methods in a different order, the composite component class can still override the original MNA-method with the <code>mnaComp</code> prefix instead of the
<code>mnaParent</code> prefix. This will prevent the <code>CompositePowerComp</code> base class from doing any subcomponent handling in this specific MNA-method,
so the subcomponent method calls have to be performed explicitly if desired. Given this, the following two implementations of the <code>mnaAddPreStepDependencies</code> method are equivalent:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>mnaParentAddPreStepDependencies</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>attributeDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>modifiedAttributes</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Only add the dependencies of the composite component, the subcomponent&#39;s dependencies are handled by the base class
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mIntfCurrent</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mIntfVoltage</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>modifiedAttributes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mRightVector</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>DP</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Ph1</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>PiLine</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>mnaCompAddPreStepDependencies</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>attributeDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>AttributeBase</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>List</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>modifiedAttributes</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Manually add pre-step dependencies of subcomponents
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>auto</span> <span style=color:#f57900>subComp</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>mSubcomponentsMNA</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>subComp</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mnaAddPreStepDependencies</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>attributeDependencies</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>modifiedAttributes</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Add pre-step dependencies of component itself
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mIntfCurrent</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>prevStepDependencies</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mIntfVoltage</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>modifiedAttributes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push_back</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mRightVector</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><div class="text-muted mt-5 pt-3 border-top">Last modified 19.05.2025: <a href=https://github.com/sogno-platform/dpsim/commit/3136b5a477415979041576120b0f27c17050a6f4>pybind: Errors when compiling with clang (#334) (3136b5a)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://slack.lfenergy.org/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="GitHub Discussions" aria-label="GitHub Discussions"><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank rel=noopener href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim aria-label="RWTH GitLab"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})'></script><script src=/dpsim/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/dpsim/js/tabpane-persist.js></script></body></html>