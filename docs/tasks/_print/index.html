<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><link rel=canonical type=text/html href=https://sogno-platform.github.io/dpsim/docs/tasks/><link rel=alternate type=application/rss+xml href=https://sogno-platform.github.io/dpsim/docs/tasks/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/dpsim/favicons/favicon.ico><link rel=apple-touch-icon href=/dpsim/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/dpsim/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/dpsim/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/dpsim/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/dpsim/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/dpsim/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/dpsim/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/dpsim/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/dpsim/favicons/android-192x192.png sizes=192x192><title>Core Tasks | DPsim</title><meta name=description content="Description of typical simulation and development tasks.
"><meta property="og:title" content="Core Tasks"><meta property="og:description" content="Description of typical simulation and development tasks.
"><meta property="og:type" content="website"><meta property="og:url" content="https://sogno-platform.github.io/dpsim/docs/tasks/"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Core Tasks"><meta itemprop=description content="Description of typical simulation and development tasks.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Core Tasks"><meta name=twitter:description content="Description of typical simulation and development tasks.
"><link rel=preload href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css as=style><link href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/dpsim/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/dpsim/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.aec3e98d8880ba93d5e1bb2859962a13.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/dpsim/docs/tasks/>Return to the regular view of this page</a>.</p></div><h1 class=title>Core Tasks</h1><div class=lead>Description of typical simulation and development tasks.</div><ul><li>1: <a href=#pg-6b7999172f91cfaada0df83ebc02ac43>Add New Model</a></li><li>2: <a href=#pg-3660485de71f4bd6ee0f64267a72be52>Create New Simulation</a></li></ul><div class=content><p>Each task should give the user</p><ul><li>The prerequisites for this task, if any (this can be specified at the top of a multi-task page if they&rsquo;re the same for all the page&rsquo;s tasks. &ldquo;All these tasks assume that you understand&mldr;.and that you have already&mldr;.&rdquo;).</li><li>What this task accomplishes.</li><li>Instructions for the task. If it involves editing a file, running a command, or writing code, provide code-formatted example snippets to show the user what to do! If there are multiple steps, provide them as a numbered list.</li><li>If appropriate, links to related concept, tutorial, or example pages.</li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-6b7999172f91cfaada0df83ebc02ac43>1 - Add New Model</h1><div class=lead>Extending the simulator with new component or control models.</div><h1 id=add-a-component-model>Add a Component Model</h1><p>In this section we will show the implementation of a new component model by means a three-phase dynamic phasor inductor model.</p><h2 id=c-oop>C++ OOP</h2><p>DPsim implements component models in a sub project called CPowerSystems (CPS) that is located in the <em>models</em> folder.
This folder is added to the DPsim CMake project.
Every component in DPsim is represented by a C++ class.</p><p>DPsim supports different types of solvers (MNA, DAE, NRP).
Each solver requires certain member functions in the component class to be implemented.
These functions are specified by the solver interface classes: <code>MNAInterface.h</code>, <code>DAEInterface.h</code>, etc.</p><h2 id=directory--namespace-structure>Directory / Namespace Structure</h2><p>For the implementation of the new component, we add two new files</p><ul><li><code>models/Source/DP/DP_Ph3_Inductor.cpp</code></li><li><code>models/Include/DP/DP_Ph3_Inductor.h</code></li></ul><p>In these files, we will implement a new C++ class with the name <code>CPS::DP::Ph3::Inductor</code>.
The general structure looks as follows.</p><p>Directories:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>DPsim
</span></span><span style=display:flex><span> |
</span></span><span style=display:flex><span> |- Source
</span></span><span style=display:flex><span> |- Include
</span></span><span style=display:flex><span>  \ models
</span></span><span style=display:flex><span>      |- Source
</span></span><span style=display:flex><span>          |- DP
</span></span><span style=display:flex><span>          |- EMT
</span></span><span style=display:flex><span>          |- Static
</span></span><span style=display:flex><span>            \ Signal
</span></span><span style=display:flex><span>      |- Include
</span></span><span style=display:flex><span>          |- DP
</span></span><span style=display:flex><span>          |- EMT
</span></span><span style=display:flex><span>          |- Static
</span></span><span style=display:flex><span>            \ Signal
</span></span></code></pre></div><p>Namespaces:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>CPS</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>DP</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>EMT</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>Static</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>Signal</span><span style=color:#000;font-weight:700>}</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>Ph1</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>Ph3</span><span style=color:#000;font-weight:700>}</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>Name</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=attributes>Attributes</h2><p>Each components has a list of attributes, which has to be specified when creating the components class.</p><p>TODO: explain attribute system</p><h2 id=tasks-for-prepost-step-functions>Tasks for Pre/Post-step Functions</h2><p>TODO: add example task dependency graph</p><h2 id=adding-the-new-component-to-dpsim>Adding the new Component to DPsim</h2><p>After finishing the implementation of the new component, it needs to be added to the following files:</p><ul><li><code>models/Include/cps/Components.h</code></li><li><code>models/Source/CMakeLists.txt</code></li><li><code>Sources/Python/Module.cpp</code></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3660485de71f4bd6ee0f64267a72be52>2 - Create New Simulation</h1><div class=lead>Using DPsim for a new simulation scenario.</div><p>Here, we will show the implementation of a new simulation scenario defined in C++, which is using DPsim as a library.</p><h1 id=directory-structure>Directory Structure</h1><p>In the end, your directory structure should look like as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>my-project
</span></span><span style=display:flex><span>  |- CMakeLists.txt
</span></span><span style=display:flex><span>  |- source
</span></span><span style=display:flex><span>      |- my-scenario.cpp
</span></span><span style=display:flex><span>  |- dpsim (as submodule)
</span></span></code></pre></div><h1 id=cmake-file>CMake File</h1><p>Your <code>CMakeLists.txt</code> could look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#204a87>cmake_minimum_required</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>VERSION</span> <span style=color:#4e9a06>3.5</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>project</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>my-project</span> <span style=color:#4e9a06>CXX</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>add_subdirectory</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>dpsim</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>add_executable</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>my-scenario</span> <span style=color:#4e9a06>source/my-scenario.cpp</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87>target_link_libraries</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>my-scenario</span> <span style=color:#4e9a06>dpsim</span><span style=color:#000;font-weight:700>)</span><span style=color:#a40000>
</span></span></span></code></pre></div><h1 id=build-the-project>Build the Project</h1><p>The build process is similar to the one of DPsim:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#204a87>cd</span> my-project
</span></span><span style=display:flex><span>mkdir build <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>cd</span> build
</span></span><span style=display:flex><span>cmake ..
</span></span><span style=display:flex><span>make my-scenario
</span></span></code></pre></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://slack.lfenergy.org/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="GitHub Discussions" aria-label="GitHub Discussions"><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank rel=noopener href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim aria-label="RWTH GitLab"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})'></script><script src=/dpsim/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/dpsim/js/tabpane-persist.js></script></body></html>