<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPsim: /__w/dpsim/dpsim/dpsim-models/src/Base/Base_SynchronGenerator.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DPsim
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a932513a424ca3c4132fc92721c4e6d6.html">dpsim-models</a></li><li class="navelem"><a class="el" href="dir_6fea149062de1f45e98577920f986d53.html">src</a></li><li class="navelem"><a class="el" href="dir_0bb973f6ea5c36754c091dfeaedf0bb8.html">Base</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">Base_SynchronGenerator.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/* Copyright 2017-2021 Institute for Automation of Complex Power Systems,</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> *                     EONERC, RWTH Aachen University</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * This Source Code Form is subject to the terms of the Mozilla Public</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * License, v. 2.0. If a copy of the MPL was not distributed with this</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *********************************************************************************/</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;dpsim-models/Base/Base_SynchronGenerator.h&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="keyword">using namespace </span>CPS;</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keywordtype">void</span> Base::SynchronGenerator::setBaseParameters(Real nomPower, Real nomVolt,</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>                                                Real nomFreq) {</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a> = nomPower;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6675ee43d4004df8cc0ea02a1d6664fa">mNomVolt</a> = nomVolt;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a08c2503cd2a4e1d4cd5c086d57482d94">mNomFreq</a> = nomFreq;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab039bff39685647af3b8029417b9de3f">mNomOmega</a> = nomFreq * 2 * PI;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>  <span class="comment">// Set base stator values</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afc1de8c466da0abb16461b31531c6f73">mBase_V_RMS</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6675ee43d4004df8cc0ea02a1d6664fa">mNomVolt</a> / sqrt(3);</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">mBase_V</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afc1de8c466da0abb16461b31531c6f73">mBase_V_RMS</a> * sqrt(2);</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a4e5626d1fdcd2c8cd7017a0541fd4e52">mBase_I_RMS</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a> / (3 * <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afc1de8c466da0abb16461b31531c6f73">mBase_V_RMS</a>);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">mBase_I</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a4e5626d1fdcd2c8cd7017a0541fd4e52">mBase_I_RMS</a> * sqrt(2);</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d0af7de4f71f445986ad16049d65128">mBase_Z</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">mBase_V</a> / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">mBase_I</a>;</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab69a67ff476512700317ee103c4051d3">mBase_OmElec</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab039bff39685647af3b8029417b9de3f">mNomOmega</a>;</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a69ca6bdbd50a766559057d7920d2f6c6">mBase_L</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d0af7de4f71f445986ad16049d65128">mBase_Z</a> / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab69a67ff476512700317ee103c4051d3">mBase_OmElec</a>;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adc7c4ac78f1d58be52ba5111436be86c">mBase_Psi</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a69ca6bdbd50a766559057d7920d2f6c6">mBase_L</a> * <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">mBase_I</a>;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe7cf1e95c0466032435f917715514f0">mBase_OmMech</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab69a67ff476512700317ee103c4051d3">mBase_OmElec</a>;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a75d2d7f0730c99602dbad83db883e48f">mBase_T</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a> / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe7cf1e95c0466032435f917715514f0">mBase_OmMech</a>;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>}</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keywordtype">void</span> Base::SynchronGenerator::setBaseParameters(Real nomPower, Real nomVolt,</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>                                                Real nomFreq,</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>                                                Real nomFieldCur) {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  mNomFieldCur = nomFieldCur;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  Base::SynchronGenerator::setBaseParameters(nomPower, nomVolt, nomFreq);</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>}</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="foldopen" id="foldopen00042" data-start="{" data-end="}">
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a9ac3b83196f52f4014e8476485b38f60">   42</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a9ac3b83196f52f4014e8476485b38f60">Base::SynchronGenerator::setBaseAndFundamentalPerUnitParameters</a>(</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    Real nomPower, Real nomVolt, Real nomFreq, Real nomFieldCur, Int poleNumber,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd, Real Rkd,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2, Real inertia) {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>  mParameterType = ParameterType::perUnit;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  mNumericalMethod = NumericalMethod::Trapezoidal;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  setBaseParameters(nomPower, nomVolt, nomFreq, nomFieldCur);</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  setAndApplyFundamentalPerUnitParameters(poleNumber, Rs, Ll, Lmd, Lmq, Rfd,</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                                          Llfd, Rkd, Llkd, Rkq1, Llkq1, Rkq2,</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>                                          Llkq2, inertia);</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>}</div>
</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="foldopen" id="foldopen00055" data-start="{" data-end="}">
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#add6ca785d0bfbf120ffc5be2c60545b6">   55</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#add6ca785d0bfbf120ffc5be2c60545b6">Base::SynchronGenerator::setBaseAndOperationalPerUnitParameters</a>(</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    Real nomPower, Real nomVolt, Real nomFreq, Int poleNumber, Real nomFieldCur,</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    Real Rs, Real Ld, Real Lq, Real Ld_t, Real Lq_t, Real Ld_s, Real Lq_s,</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    Real Ll, Real Td0_t, Real Tq0_t, Real Td0_s, Real Tq0_s, Real inertia) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  mParameterType = ParameterType::perUnit;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  mNumericalMethod = NumericalMethod::Trapezoidal;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  setBaseParameters(nomPower, nomVolt, nomFreq, nomFieldCur);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  setOperationalPerUnitParameters(poleNumber, inertia, Rs, Ld, Lq, Ll, Ld_t,</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                                  Lq_t, Ld_s, Lq_s, Td0_t, Tq0_t, Td0_s, Tq0_s);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  calculateFundamentalFromOperationalParameters();</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>}</div>
</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="keywordtype">void</span> Base::SynchronGenerator::setOperationalPerUnitParameters(</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    Int poleNumber, Real inertia, Real Rs, Real Ld, Real Lq, Real Ll, Real Ld_t,</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    Real Lq_t, Real Ld_s, Real Lq_s, Real Td0_t, Real Tq0_t, Real Td0_s,</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    Real Tq0_s) {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  mPoleNumber = poleNumber;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  **mInertia = inertia;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  **mRs = Rs;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  **mLl = Ll;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  **mLd = Ld;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  **mLq = Lq;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  **mLd_t = Ld_t;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  **mLq_t = Lq_t;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  **mLd_s = Ld_s;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  **mLq_s = Lq_s;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  **mTd0_t = Td0_t;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  **mTq0_t = Tq0_t;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  **mTd0_s = Td0_s;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  **mTq0_s = Tq0_s;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>}</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="keywordtype">void</span> Base::SynchronGenerator::setAndApplyFundamentalPerUnitParameters(</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    Int poleNumber, Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd,</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    Real Rkd, Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2,</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    Real inertia) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  Base::SynchronGenerator::setFundamentalPerUnitParameters(</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>      poleNumber, Rs, Ll, Lmd, Lmq, Rfd, Llfd, Rkd, Llkd, Rkq1, Llkq1, Rkq2,</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>      Llkq2, inertia);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  Base::SynchronGenerator::applyFundamentalPerUnitParameters();</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>}</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="keywordtype">void</span> Base::SynchronGenerator::setFundamentalPerUnitParameters(</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    Int poleNumber, Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd,</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    Real Rkd, Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2,</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    Real inertia) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="comment">// PoleNumber otherwise not set but currently not used in SynchronGeneratorDQ</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  mPoleNumber = poleNumber;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  **mInertia = inertia;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  **mRs = Rs;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  **mLl = Ll;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  mLmd = Lmd;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  mLmq = Lmq;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  mRfd = Rfd;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  mLlfd = Llfd;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  mRkd = Rkd;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  mLlkd = Llkd;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  mRkq1 = Rkq1;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  mLlkq1 = Llkq1;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  mRkq2 = Rkq2;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  mLlkq2 = Llkq2;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>}</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="keywordtype">void</span> Base::SynchronGenerator::applyFundamentalPerUnitParameters() {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="comment">// derive further parameters</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  **mLd = **mLl + mLmd;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  **mLq = **mLl + mLmq;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  mLfd = mLlfd + mLmd;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  mLkd = mLlkd + mLmd;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  mLkq1 = mLlkq1 + mLmq;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  mLkq2 = mLlkq2 + mLmq;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="comment">// base rotor values</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  mBase_ifd = mLmd * mNomFieldCur;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  mBase_vfd = mNomPower / mBase_ifd;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  mBase_Zfd = mBase_vfd / mBase_ifd;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  mBase_Lfd = mBase_Zfd / mBase_OmElec;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <span class="comment">// derive number of damping windings</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <span class="keywordflow">if</span> (mRkq2 == 0 &amp;&amp; mLlkq2 == 0)</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    mNumDampingWindings = 1;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    mNumDampingWindings = 2;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordflow">if</span> (mNumDampingWindings == 1) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    mVsr = Matrix::Zero(6, 1);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    mIsr = Matrix::Zero(6, 1);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    mPsisr = Matrix::Zero(6, 1);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    mInductanceMat = Matrix::Zero(6, 6);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    mResistanceMat = Matrix::Zero(6, 6);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// Determinant of Lq(inductance matrix of q axis)</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// Real detLq = -(mLl + mLmq)*(mLlkq1 + mLmq) + mLmq*mLmq;</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// Determinant of Ld (inductance matrix of d axis)</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="comment">// Real detLd = (mLmd + mLl)*(-mLlfd*mLlkd - mLlfd*mLmd - mLmd*mLlkd) +</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="comment">// mLmd*mLmd*(mLlfd + mLlkd);</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    mInductanceMat &lt;&lt; **mLd, mLmd, mLmd, 0, 0, 0, mLmd, mLfd, mLmd, 0, 0, 0,</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        mLmd, mLmd, mLkd, 0, 0, 0, 0, 0, 0, **mLq, mLmq, 0, 0, 0, 0, mLmq,</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        mLkq1, 0, 0, 0, 0, 0, 0, **mLl;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    mResistanceMat &lt;&lt; **mRs, 0, 0, 0, 0, 0, 0, mRfd, 0, 0, 0, 0, 0, 0, mRkd, 0,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        0, 0, 0, 0, 0, **mRs, 0, 0, 0, 0, 0, 0, mRkq1, 0, 0, 0, 0, 0, 0, **mRs;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="comment">// Compute inverse Inductance Matrix:</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    mInvInductanceMat = mInductanceMat.inverse();</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    mVsr = Matrix::Zero(7, 1);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    mIsr = Matrix::Zero(7, 1);</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    mPsisr = Matrix::Zero(7, 1);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    mInductanceMat = Matrix::Zero(7, 7);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    mResistanceMat = Matrix::Zero(7, 7);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// Determinant of Lq(inductance matrix of q axis)</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// Real detLq = -mLmq*mLlkq2*(mLlkq1 + mLl) - mLl*mLlkq1*(mLlkq2 + mLmq);</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// Determinant of Ld (inductance matrix of d axis)</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="comment">// Real detLd = (mLmd + mLl)*(-mLlfd*mLlkd - mLlfd*mLmd - mLmd*mLlkd) +</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="comment">// mLmd*mLmd*(mLlfd + mLlkd);</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    mInductanceMat &lt;&lt; **mLd, mLmd, mLmd, 0, 0, 0, 0, mLmd, mLfd, mLmd, 0, 0, 0,</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        0, mLmd, mLmd, mLkd, 0, 0, 0, 0, 0, 0, 0, **mLq, mLmq, mLmq, 0, 0, 0, 0,</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        mLmq, mLkq1, mLmq, 0, 0, 0, 0, mLmq, mLmq, mLkq2, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        **mLl;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    mResistanceMat &lt;&lt; **mRs, 0, 0, 0, 0, 0, 0, 0, mRfd, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        mRkd, 0, 0, 0, 0, 0, 0, 0, **mRs, 0, 0, 0, 0, 0, 0, 0, mRkq1, 0, 0, 0,</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        0, 0, 0, 0, mRkq2, 0, 0, 0, 0, 0, 0, 0, **mRs;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="comment">// Compute inverse Inductance Matrix:</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    mInvInductanceMat = mInductanceMat.inverse();</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  }</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>}</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="keywordtype">void</span> Base::SynchronGenerator::calculateFundamentalFromOperationalParameters() {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  mLmd = **mLd - **mLl;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  mLmq = **mLq - **mLl;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  mLlfd = mLmd * (**mLd_t - **mLl) / (mLmd - **mLd_t + **mLl);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  mLlkq1 = mLmq * (**mLq_t - **mLl) / (mLmq - **mLq_t + **mLl);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  mLlkd = mLmd * mLlfd * (**mLd_s - **mLl) /</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>          (mLlfd * mLmd - (mLmd + mLlfd) * (**mLd_s - **mLl));</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  mLlkq2 = mLmq * mLlkq1 * (**mLq_s - **mLl) /</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>           (mLlkq1 * mLmq - (mLmq + mLlkq1) * (**mLq_s - **mLl));</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  mRfd = (mLmd + mLlfd) / (**mTd0_t * mNomOmega);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  mRkd = (1 / (**mTd0_s * mNomOmega)) * (mLlkd + mLmd * mLlfd / (mLmd + mLlfd));</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  mRkq1 = (mLmq + mLlkq1) / (**mTq0_t * mNomOmega);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  mRkq2 =</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>      (1 / (**mTq0_s * mNomOmega)) * (mLlkq2 + mLmq * mLlkq1 / (mLmq + mLlkq1));</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  Base::SynchronGenerator::applyFundamentalPerUnitParameters();</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>}</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="keywordtype">void</span> Base::SynchronGenerator::setInitialValues(Real initActivePower,</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                                               Real initReactivePower,</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                                               Real initTerminalVolt,</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                                               Real initVoltAngle,</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                                               Real initMechPower) {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  mInitElecPower = Complex(initActivePower, initReactivePower);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  mInitTerminalVoltage = initTerminalVolt;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  mInitVoltAngle = initVoltAngle;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  mInitMechPower = initMechPower;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  mInitialValuesSet = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>}</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="foldopen" id="foldopen00227" data-start="{" data-end="}">
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe2b767d31048ccca010e6568c4a1474">  227</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe2b767d31048ccca010e6568c4a1474">Base::SynchronGenerator::initPerUnitStates</a>() {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  <span class="comment">// Power in per unit</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  Real init_P = mInitElecPower.real() / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  Real init_Q = mInitElecPower.imag() / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a>;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  Real init_S_abs = sqrt(pow(init_P, 2.) + pow(init_Q, 2.));</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="comment">// Complex init_S = mInitElecPower;</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <span class="comment">// Terminal voltage in pu</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  Real init_vt_abs = mInitTerminalVoltage / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">mBase_V</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  <span class="comment">// Complex init_vt = Complex(mInitTerminalVoltage*cos(mInitVoltAngle),</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="comment">// mInitTerminalVoltage*sin(mInitVoltAngle));</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  Real init_it_abs = init_S_abs / init_vt_abs;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="comment">// Complex init_it = std::conj( init_S / init_vt );</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  <span class="comment">// Power factor</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  Real init_pf = acos(init_P / init_S_abs);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="comment">// Load angle</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  Real init_delta = atan(((<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3b11ffdfcd99c239f2fe63a15ca4b090">mLmq</a> + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab84b0e161919799fb1bb06c73b7cf205">mLl</a>) * init_it_abs * cos(init_pf) -</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                          **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">mRs</a> * init_it_abs * sin(init_pf)) /</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                         (init_vt_abs + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">mRs</a> * init_it_abs * cos(init_pf) +</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                          (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3b11ffdfcd99c239f2fe63a15ca4b090">mLmq</a> + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab84b0e161919799fb1bb06c73b7cf205">mLl</a>) * init_it_abs * sin(init_pf)));</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  <span class="comment">// Real init_delta_deg = init_delta / PI * 180;</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="comment">// Electrical torque</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  <span class="comment">// Real init_Te = init_P + **mRs * pow(init_it, 2.);</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  <span class="comment">// dq stator voltages and currents</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  Real init_vd = init_vt_abs * sin(init_delta);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  Real init_vq = init_vt_abs * cos(init_delta);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>  Real init_id = init_it_abs * sin(init_delta + init_pf);</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  Real init_iq = init_it_abs * cos(init_delta + init_pf);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="comment">// Rotor voltage and current</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  Real init_ifd = (init_vq + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">mRs</a> * init_iq + (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">mLmd</a> + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab84b0e161919799fb1bb06c73b7cf205">mLl</a>) * init_id) / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">mLmd</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  Real init_vfd = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#aa43d2c670dffe9c37c3b2befb32c1933">mRfd</a> * init_ifd;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="comment">// Flux linkages</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  Real init_psid = init_vq + **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">mRs</a> * init_iq;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  Real init_psiq = -init_vd - **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">mRs</a> * init_id;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  Real init_psifd = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#acc8479be0d7e5014222fb3dd2eb54648">mLfd</a> * init_ifd - <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">mLmd</a> * init_id;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  Real init_psikd = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">mLmd</a> * (init_ifd - init_id);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  Real init_psiq1 = -<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3b11ffdfcd99c239f2fe63a15ca4b090">mLmq</a> * init_iq;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  Real init_psiq2 = -<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3b11ffdfcd99c239f2fe63a15ca4b090">mLmq</a> * init_iq;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <span class="comment">// Initialize mechanical variables</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ae0e8a4b5f81970dcaa612f632431f721">mOmMech</a> = 1;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6513552ca5e71c1aa1d2aec4a85effdf">mMechPower</a> = mInitMechPower / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">mNomPower</a>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a35b09d0fe8c40f4aa2a267c21dce6210">mMechTorque</a> = **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6513552ca5e71c1aa1d2aec4a85effdf">mMechPower</a> / 1;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a26979017f3a1afeff72d962903396dce">mThetaMech</a> = mInitVoltAngle + init_delta - PI / 2.;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ac8111bd5d3959a707b7c71757367c366">mDelta</a> = init_delta;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad3d3c246dac87ab59173cda6843d8773">mNumDampingWindings</a> == 2) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a> &lt;&lt; init_vd, init_vfd, 0, init_vq, 0, 0, 0;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a> &lt;&lt; -init_id, init_ifd, 0, -init_iq, 0, 0, 0;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a> &lt;&lt; init_psid, init_psifd, init_psikd, init_psiq, init_psiq1,</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        init_psiq2, 0;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a> &lt;&lt; init_vd, init_vfd, 0, init_vq, 0, 0;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a> &lt;&lt; -init_id, init_ifd, 0, -init_iq, 0, 0;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a> &lt;&lt; init_psid, init_psifd, init_psikd, init_psiq, init_psiq1, 0;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad3d3c246dac87ab59173cda6843d8773">mNumDampingWindings</a> == 2) {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a> &lt;&lt; init_vd, init_vfd, 0, init_vq, 0, 0, 0;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a> &lt;&lt; -init_id, init_ifd, 0, -init_iq, 0, 0, 0;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a> &lt;&lt; init_psid, init_psifd, init_psikd, init_psiq, init_psiq1,</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        init_psiq2, 0;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a> &lt;&lt; init_vd, init_vfd, 0, init_vq, 0, 0;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a> &lt;&lt; -init_id, init_ifd, 0, -init_iq, 0, 0;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a> &lt;&lt; init_psid, init_psifd, init_psikd, init_psiq, init_psiq1, 0;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afb80ab1571a4fc891d4669fbc97868d2">mElecTorque</a> = (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a>(3, 0) * <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(0, 0) - <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">mPsisr</a>(0, 0) * <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(3, 0));</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  <span class="comment">// Initialize controllers</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a2bb894751b16a6742c20a5fb1a1bbe85">mHasExciter</a>) {</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="comment">// Note: field voltage scaled by Lmd/Rfd to transform from synchronous generator pu system</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// to the exciter pu system</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a337b841aa6c0f367ded9c2abe22a10f4">mExciter</a>-&gt;initialize(init_vt_abs, (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">mLmd</a> / <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#aa43d2c670dffe9c37c3b2befb32c1933">mRfd</a>) * init_vfd);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>}</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="keywordtype">void</span> Base::SynchronGenerator::calcStateSpaceMatrixDQ() {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  <span class="keywordflow">if</span> (mNumDampingWindings == 2) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    mLad = 1. / (1. / mLmd + 1. / **mLl + 1. / mLlfd + 1. / mLlkd);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    mLaq = 1. / (1. / mLmq + 1. / **mLl + 1. / mLlkq1 + 1. / mLlkq2);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    mPsisr = Matrix::Zero(7, 1);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    mOmegaFluxMat = Matrix::Zero(7, 7);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    mOmegaFluxMat &lt;&lt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        0, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        0, 0, 0, 0, 0;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    mFluxStateSpaceMat =</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        Matrix::Zero(7, 7); <span class="comment">// order of lambdas: ds; fd; kd; qs; kq1; kq2; 0s</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    mFluxStateSpaceMat &lt;&lt; **mRs / **mLl * mLad / **mLl - **mRs / **mLl,</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        **mRs / **mLl * mLad / mLlfd, **mRs / **mLl * mLad / mLlkd, 0, 0, 0, 0,</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        mRfd / mLlfd * mLad / **mLl, mRfd / mLlfd * mLad / mLlfd - mRfd / mLlfd,</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        mRfd / mLlfd * mLad / mLlkd, 0, 0, 0, 0, mRkd / mLlkd * mLad / **mLl,</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        mRkd / mLlkd * mLad / mLlfd, mRkd / mLlkd * mLad / mLlkd - mRkd / mLlkd,</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        0, 0, 0, 0, 0, 0, 0, **mRs / **mLl * mLaq / **mLl - **mRs / **mLl,</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        **mRs / **mLl * mLaq / mLlkq1, **mRs / **mLl * mLaq / mLlkq2, 0, 0, 0,</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        0, mRkq1 / mLlkq1 * mLaq / **mLl,</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        mRkq1 / mLlkq1 * mLaq / mLlkq1 - mRkq1 / mLlkq1,</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        mRkq1 / mLlkq1 * mLaq / mLlkq2, 0, 0, 0, 0,</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        mRkq2 / mLlkq2 * mLaq / **mLl, mRkq2 / mLlkq2 * mLaq / mLlkq1,</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        mRkq2 / mLlkq2 * mLaq / mLlkq2 - mRkq2 / mLlkq2, 0, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        -**mRs / **mLl;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    mFluxToCurrentMat =</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        Matrix::Zero(7, 7); <span class="comment">// need for electric torque id, iq -&gt;1st and 4th row</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    mFluxToCurrentMat &lt;&lt; 1. / **mLl - mLad / **mLl / **mLl,</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        -mLad / mLlfd / **mLl, -mLad / mLlkd / **mLl, 0, 0, 0, 0,</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        -mLad / **mLl / mLlfd, 1. / mLlfd - mLad / mLlfd / mLlfd,</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        -mLad / mLlkd / mLlfd, 0, 0, 0, 0, -mLad / **mLl / mLlkd,</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        -mLad / mLlfd / mLlkd, 1. / mLlkd - mLad / mLlkd / mLlkd, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        0, 0, 1. / **mLl - mLaq / **mLl / **mLl, -mLaq / mLlkq1 / **mLl,</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        -mLaq / mLlkq2 / **mLl, 0, 0, 0, 0, -mLaq / **mLl / mLlkq1,</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        1. / mLlkq1 - mLaq / mLlkq1 / mLlkq1, -mLaq / mLlkq2 / mLlkq1, 0, 0, 0,</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        0, -mLaq / **mLl / mLlkq2, -mLaq / mLlkq1 / mLlkq2,</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        1. / mLlkq2 - mLaq / mLlkq2 / mLlkq2, 0, 0, 0, 0, 0, 0, 0, 1. / **mLl;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    mLad = 1. / (1. / mLmd + 1. / **mLl + 1. / mLlfd + 1. / mLlkd);</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    mLaq = 1. / (1. / mLmq + 1. / **mLl + 1. / mLlkq1);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    mPsisr = Matrix::Zero(6, 1);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    mOmegaFluxMat = Matrix::Zero(6, 6);</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    mOmegaFluxMat &lt;&lt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1,</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    mFluxStateSpaceMat = Matrix::Zero(6, 6);</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    mFluxStateSpaceMat &lt;&lt; <span class="comment">// same order as above; only without kq2</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        **mRs / **mLl * mLad / **mLl - **mRs / **mLl,</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        **mRs / **mLl * mLad / mLlfd, **mRs / **mLl * mLad / mLlkd, 0, 0, 0,</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        mRfd / mLlfd * mLad / **mLl, mRfd / mLlfd * mLad / mLlfd - mRfd / mLlfd,</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        mRfd / mLlfd * mLad / mLlkd, 0, 0, 0, mRkd / mLlkd * mLad / **mLl,</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        mRkd / mLlkd * mLad / mLlfd, mRkd / mLlkd * mLad / mLlkd - mRkd / mLlkd,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        0, 0, 0, 0, 0, 0, **mRs / **mLl * mLaq / **mLl - **mRs / **mLl,</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        **mRs / **mLl * mLaq / mLlkq1, 0, 0, 0, 0,</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        mRkq1 / mLlkq1 * mLaq / **mLl,</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        mRkq1 / mLlkq1 * mLaq / mLlkq1 - mRkq1 / mLlkq1, 0, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        -**mRs / **mLl;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    mFluxToCurrentMat = Matrix::Zero(6, 6);</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    mFluxToCurrentMat &lt;&lt; 1. / **mLl - mLad / **mLl / **mLl,</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        -mLad / mLlfd / **mLl, -mLad / mLlkd / **mLl, 0, 0, 0,</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        -mLad / **mLl / mLlfd, 1. / mLlfd - mLad / mLlfd / mLlfd,</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        -mLad / mLlkd / mLlfd, 0, 0, 0, -mLad / **mLl / mLlkd,</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        -mLad / mLlfd / mLlkd, 1. / mLlkd - mLad / mLlkd / mLlkd, 0, 0, 0, 0, 0,</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        0, 1. / **mLl - mLaq / **mLl / **mLl, -mLaq / mLlkq1 / **mLl, 0, 0, 0,</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        0, -mLaq / **mLl / mLlkq1, 1. / mLlkq1 - mLaq / mLlkq1 / mLlkq1, 0, 0,</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        0, 0, 0, 0, 1. / **mLl;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>  }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>}</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>Real Base::SynchronGenerator::calcHfromJ(Real J, Real omegaNominal,</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                                         Int polePairNumber) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <span class="keywordflow">return</span> J * 0.5 * omegaNominal * omegaNominal / polePairNumber;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>}</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="foldopen" id="foldopen00388" data-start="{" data-end="}">
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d9cbee28b83779be05f62ed9c70f390">  388</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d9cbee28b83779be05f62ed9c70f390">Base::SynchronGenerator::addExciter</a>(Real Ta, Real Ka, Real Te, Real Ke,</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                                         Real Tf, Real Kf, Real Tr) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a337b841aa6c0f367ded9c2abe22a10f4">mExciter</a> = Signal::Exciter::make(<span class="stringliteral">&quot;Exciter&quot;</span>, CPS::Logger::Level::info);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a337b841aa6c0f367ded9c2abe22a10f4">mExciter</a>-&gt;setParameters(Ta, Ka, Te, Ke, Tf, Kf, Tr);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a2bb894751b16a6742c20a5fb1a1bbe85">mHasExciter</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>}</div>
</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="foldopen" id="foldopen00395" data-start="{" data-end="}">
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a763d03947fbed7314c1fc97d88293e9d">  395</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a763d03947fbed7314c1fc97d88293e9d">Base::SynchronGenerator::addGovernor</a>(Real Ta, Real Tb, Real Tc, Real Fa,</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>                                          Real Fb, Real Fc, Real K, Real Tsr,</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>                                          Real Tsm, Real Tm_init, Real PmRef) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a7dfc2903c3a1760be272b39a999c2d3b">mTurbineGovernor</a> = Signal::TurbineGovernor::make(<span class="stringliteral">&quot;TurbineGovernor&quot;</span>,</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                                                   CPS::Logger::Level::info);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a7dfc2903c3a1760be272b39a999c2d3b">mTurbineGovernor</a>-&gt;setParameters(Ta, Tb, Tc, Fa, Fb, Fc, K, Tsr, Tsm);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a7dfc2903c3a1760be272b39a999c2d3b">mTurbineGovernor</a>-&gt;initialize(PmRef, Tm_init);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ae418b7ecf3bb81caacd604ca05c45192">mHasTurbineGovernor</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>}</div>
</div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a03f4a70f1d448200321dc0fdf0a01981"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">CPS::Base::SynchronGenerator::mIsr</a></div><div class="ttdeci">Matrix mIsr</div><div class="ttdoc">Vector of stator and rotor currents.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00219">Base_SynchronGenerator.h:219</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a08c2503cd2a4e1d4cd5c086d57482d94"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a08c2503cd2a4e1d4cd5c086d57482d94">CPS::Base::SynchronGenerator::mNomFreq</a></div><div class="ttdeci">Real mNomFreq</div><div class="ttdoc">nominal frequency fn [Hz]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00063">Base_SynchronGenerator.h:63</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a24bd33b8a66712cc7ef207a91f8b5601"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a24bd33b8a66712cc7ef207a91f8b5601">CPS::Base::SynchronGenerator::mLmd</a></div><div class="ttdeci">Real mLmd</div><div class="ttdoc">d-axis mutual inductance Lmd [H]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00074">Base_SynchronGenerator.h:74</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a252ecc59be9dfadb9dde6d74c018780d"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">CPS::Base::SynchronGenerator::mBase_I</a></div><div class="ttdeci">Real mBase_I</div><div class="ttdoc">base stator current peak</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00144">Base_SynchronGenerator.h:144</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a26979017f3a1afeff72d962903396dce"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a26979017f3a1afeff72d962903396dce">CPS::Base::SynchronGenerator::mThetaMech</a></div><div class="ttdeci">Real mThetaMech</div><div class="ttdoc">theta</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00179">Base_SynchronGenerator.h:179</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a2bb894751b16a6742c20a5fb1a1bbe85"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a2bb894751b16a6742c20a5fb1a1bbe85">CPS::Base::SynchronGenerator::mHasExciter</a></div><div class="ttdeci">Bool mHasExciter</div><div class="ttdoc">Determines if Exciter is activated.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00266">Base_SynchronGenerator.h:266</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a337b841aa6c0f367ded9c2abe22a10f4"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a337b841aa6c0f367ded9c2abe22a10f4">CPS::Base::SynchronGenerator::mExciter</a></div><div class="ttdeci">std::shared_ptr&lt; Signal::Exciter &gt; mExciter</div><div class="ttdoc">Signal component modelling voltage regulator and exciter.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00365">Base_SynchronGenerator.h:365</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a35b09d0fe8c40f4aa2a267c21dce6210"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a35b09d0fe8c40f4aa2a267c21dce6210">CPS::Base::SynchronGenerator::mMechTorque</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mMechTorque</div><div class="ttdoc">mechanical torque</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00185">Base_SynchronGenerator.h:185</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a3b11ffdfcd99c239f2fe63a15ca4b090"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3b11ffdfcd99c239f2fe63a15ca4b090">CPS::Base::SynchronGenerator::mLmq</a></div><div class="ttdeci">Real mLmq</div><div class="ttdoc">q-axis mutual inductance Lmq [H]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00076">Base_SynchronGenerator.h:76</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a4e5626d1fdcd2c8cd7017a0541fd4e52"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a4e5626d1fdcd2c8cd7017a0541fd4e52">CPS::Base::SynchronGenerator::mBase_I_RMS</a></div><div class="ttdeci">Real mBase_I_RMS</div><div class="ttdoc">base stator current RMS</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00146">Base_SynchronGenerator.h:146</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6513552ca5e71c1aa1d2aec4a85effdf"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6513552ca5e71c1aa1d2aec4a85effdf">CPS::Base::SynchronGenerator::mMechPower</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mMechPower</div><div class="ttdoc">mechanical Power Pm [W]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00195">Base_SynchronGenerator.h:195</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6675ee43d4004df8cc0ea02a1d6664fa"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6675ee43d4004df8cc0ea02a1d6664fa">CPS::Base::SynchronGenerator::mNomVolt</a></div><div class="ttdeci">Real mNomVolt</div><div class="ttdoc">nominal voltage Vn [V] (phase-to-phase RMS)</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00061">Base_SynchronGenerator.h:61</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a66db7a71580419f6f442557ae1de4b49"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">CPS::Base::SynchronGenerator::mVsr</a></div><div class="ttdeci">Matrix mVsr</div><div class="ttdoc">Vector of stator and rotor voltages.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00209">Base_SynchronGenerator.h:209</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6758651ec90e32ca2e11b96dfa89b646"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6758651ec90e32ca2e11b96dfa89b646">CPS::Base::SynchronGenerator::mPsisr</a></div><div class="ttdeci">Matrix mPsisr</div><div class="ttdoc">Vector of stator and rotor fluxes.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00229">Base_SynchronGenerator.h:229</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a69ca6bdbd50a766559057d7920d2f6c6"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a69ca6bdbd50a766559057d7920d2f6c6">CPS::Base::SynchronGenerator::mBase_L</a></div><div class="ttdeci">Real mBase_L</div><div class="ttdoc">base stator inductance</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00154">Base_SynchronGenerator.h:154</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6d0af7de4f71f445986ad16049d65128"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d0af7de4f71f445986ad16049d65128">CPS::Base::SynchronGenerator::mBase_Z</a></div><div class="ttdeci">Real mBase_Z</div><div class="ttdoc">base stator impedance</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00148">Base_SynchronGenerator.h:148</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6d9cbee28b83779be05f62ed9c70f390"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d9cbee28b83779be05f62ed9c70f390">CPS::Base::SynchronGenerator::addExciter</a></div><div class="ttdeci">void addExciter(Real Ta, Real Ka, Real Te, Real Ke, Real Tf, Real Kf, Real Tr)</div><div class="ttdoc">Add voltage regulator and exciter.</div><div class="ttdef"><b>Definition</b> <a href="#l00388">Base_SynchronGenerator.cpp:388</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6dd247e72aa169d0aadd03655def5f44"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6dd247e72aa169d0aadd03655def5f44">CPS::Base::SynchronGenerator::mRs</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mRs</div><div class="ttdoc">stator resistance Rs [Ohm]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00106">Base_SynchronGenerator.h:106</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a75d2d7f0730c99602dbad83db883e48f"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a75d2d7f0730c99602dbad83db883e48f">CPS::Base::SynchronGenerator::mBase_T</a></div><div class="ttdeci">Real mBase_T</div><div class="ttdoc">base torque</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00156">Base_SynchronGenerator.h:156</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a763d03947fbed7314c1fc97d88293e9d"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a763d03947fbed7314c1fc97d88293e9d">CPS::Base::SynchronGenerator::addGovernor</a></div><div class="ttdeci">void addGovernor(Real Ta, Real Tb, Real Tc, Real Fa, Real Fb, Real Fc, Real K, Real Tsr, Real Tsm, Real Tm_init, Real PmRef)</div><div class="ttdoc">Add governor and turbine.</div><div class="ttdef"><b>Definition</b> <a href="#l00395">Base_SynchronGenerator.cpp:395</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a7dfc2903c3a1760be272b39a999c2d3b"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a7dfc2903c3a1760be272b39a999c2d3b">CPS::Base::SynchronGenerator::mTurbineGovernor</a></div><div class="ttdeci">std::shared_ptr&lt; Signal::TurbineGovernor &gt; mTurbineGovernor</div><div class="ttdoc">Signal component modelling governor control and steam turbine.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00363">Base_SynchronGenerator.h:363</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a9ac3b83196f52f4014e8476485b38f60"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a9ac3b83196f52f4014e8476485b38f60">CPS::Base::SynchronGenerator::setBaseAndFundamentalPerUnitParameters</a></div><div class="ttdeci">void setBaseAndFundamentalPerUnitParameters(Real nomPower, Real nomVolt, Real nomFreq, Real nomFieldCur, Int poleNumber, Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd, Real Rkd, Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2, Real inertia)</div><div class="ttdoc">Initializes the base and fundamental machine parameters in per unit.</div><div class="ttdef"><b>Definition</b> <a href="#l00042">Base_SynchronGenerator.cpp:42</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_aa43d2c670dffe9c37c3b2befb32c1933"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#aa43d2c670dffe9c37c3b2befb32c1933">CPS::Base::SynchronGenerator::mRfd</a></div><div class="ttdeci">Real mRfd</div><div class="ttdoc">field resistance Rfd [Ohm]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00078">Base_SynchronGenerator.h:78</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ab039bff39685647af3b8029417b9de3f"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab039bff39685647af3b8029417b9de3f">CPS::Base::SynchronGenerator::mNomOmega</a></div><div class="ttdeci">Real mNomOmega</div><div class="ttdoc">nominal angular frequency wn [Hz]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00065">Base_SynchronGenerator.h:65</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ab69a67ff476512700317ee103c4051d3"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab69a67ff476512700317ee103c4051d3">CPS::Base::SynchronGenerator::mBase_OmElec</a></div><div class="ttdeci">Real mBase_OmElec</div><div class="ttdoc">base electrical angular frequency</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00150">Base_SynchronGenerator.h:150</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ab84b0e161919799fb1bb06c73b7cf205"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab84b0e161919799fb1bb06c73b7cf205">CPS::Base::SynchronGenerator::mLl</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mLl</div><div class="ttdoc">leakage inductance Ll [H]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00108">Base_SynchronGenerator.h:108</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_abe2b767d31048ccca010e6568c4a1474"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe2b767d31048ccca010e6568c4a1474">CPS::Base::SynchronGenerator::initPerUnitStates</a></div><div class="ttdeci">void initPerUnitStates()</div><div class="ttdef"><b>Definition</b> <a href="#l00227">Base_SynchronGenerator.cpp:227</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_abe7cf1e95c0466032435f917715514f0"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe7cf1e95c0466032435f917715514f0">CPS::Base::SynchronGenerator::mBase_OmMech</a></div><div class="ttdeci">Real mBase_OmMech</div><div class="ttdoc">base mechanical angular frequency</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00152">Base_SynchronGenerator.h:152</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ac8111bd5d3959a707b7c71757367c366"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ac8111bd5d3959a707b7c71757367c366">CPS::Base::SynchronGenerator::mDelta</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mDelta</div><div class="ttdoc">rotor angle delta</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00183">Base_SynchronGenerator.h:183</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_acc8479be0d7e5014222fb3dd2eb54648"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#acc8479be0d7e5014222fb3dd2eb54648">CPS::Base::SynchronGenerator::mLfd</a></div><div class="ttdeci">Real mLfd</div><div class="ttdoc">field inductance Lfd [H]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00082">Base_SynchronGenerator.h:82</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ad3d3c246dac87ab59173cda6843d8773"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad3d3c246dac87ab59173cda6843d8773">CPS::Base::SynchronGenerator::mNumDampingWindings</a></div><div class="ttdeci">Int mNumDampingWindings</div><div class="ttdoc">Number of damping windings in q.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00069">Base_SynchronGenerator.h:69</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ad4ae7afe556b5ccfa16e60862ee14540"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">CPS::Base::SynchronGenerator::mBase_V</a></div><div class="ttdeci">Real mBase_V</div><div class="ttdoc">base stator voltage (phase-to-ground peak)</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00140">Base_SynchronGenerator.h:140</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_adc7c4ac78f1d58be52ba5111436be86c"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adc7c4ac78f1d58be52ba5111436be86c">CPS::Base::SynchronGenerator::mBase_Psi</a></div><div class="ttdeci">Real mBase_Psi</div><div class="ttdoc">base flux linkage</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00158">Base_SynchronGenerator.h:158</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_adce23b4a4e0806102a4f496f4024e881"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#adce23b4a4e0806102a4f496f4024e881">CPS::Base::SynchronGenerator::mNomPower</a></div><div class="ttdeci">Real mNomPower</div><div class="ttdoc">nominal power Pn [VA]</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00059">Base_SynchronGenerator.h:59</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_add6ca785d0bfbf120ffc5be2c60545b6"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#add6ca785d0bfbf120ffc5be2c60545b6">CPS::Base::SynchronGenerator::setBaseAndOperationalPerUnitParameters</a></div><div class="ttdeci">void setBaseAndOperationalPerUnitParameters(Real nomPower, Real nomVolt, Real nomFreq, Int poleNumber, Real nomFieldCur, Real Rs, Real Ld, Real Lq, Real Ld_t, Real Lq_t, Real Ld_s, Real Lq_s, Real Ll, Real Td0_t, Real Tq0_t, Real Td0_s, Real Tq0_s, Real inertia)</div><div class="ttdef"><b>Definition</b> <a href="#l00055">Base_SynchronGenerator.cpp:55</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ae0e8a4b5f81970dcaa612f632431f721"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ae0e8a4b5f81970dcaa612f632431f721">CPS::Base::SynchronGenerator::mOmMech</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mOmMech</div><div class="ttdoc">rotor speed omega_r</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00189">Base_SynchronGenerator.h:189</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ae418b7ecf3bb81caacd604ca05c45192"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ae418b7ecf3bb81caacd604ca05c45192">CPS::Base::SynchronGenerator::mHasTurbineGovernor</a></div><div class="ttdeci">Bool mHasTurbineGovernor</div><div class="ttdoc">Determines if Turbine and Governor are activated.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00264">Base_SynchronGenerator.h:264</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_afb80ab1571a4fc891d4669fbc97868d2"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afb80ab1571a4fc891d4669fbc97868d2">CPS::Base::SynchronGenerator::mElecTorque</a></div><div class="ttdeci">const Attribute&lt; Real &gt;::Ptr mElecTorque</div><div class="ttdoc">electrical torque</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00197">Base_SynchronGenerator.h:197</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_afc1de8c466da0abb16461b31531c6f73"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#afc1de8c466da0abb16461b31531c6f73">CPS::Base::SynchronGenerator::mBase_V_RMS</a></div><div class="ttdeci">Real mBase_V_RMS</div><div class="ttdoc">base stator voltage (phase-to-ground RMS)</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00142">Base_SynchronGenerator.h:142</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
