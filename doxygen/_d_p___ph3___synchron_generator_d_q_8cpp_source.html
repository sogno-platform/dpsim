<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPsim: /__w/dpsim/dpsim/dpsim-models/src/DP/DP_Ph3_SynchronGeneratorDQ.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DPsim
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a932513a424ca3c4132fc92721c4e6d6.html">dpsim-models</a></li><li class="navelem"><a class="el" href="dir_6fea149062de1f45e98577920f986d53.html">src</a></li><li class="navelem"><a class="el" href="dir_621813f9b4c502f03ed48dd248a52328.html">DP</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">DP_Ph3_SynchronGeneratorDQ.cpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/* Copyright 2017-2021 Institute for Automation of Complex Power Systems,</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> *                     EONERC, RWTH Aachen University</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * This Source Code Form is subject to the terms of the Mozilla Public</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * License, v. 2.0. If a copy of the MPL was not distributed with this</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *********************************************************************************/</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;dpsim-models/DP/DP_Ph3_SynchronGeneratorDQ.h&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">//Added for testing/printing purposes:</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">using namespace </span>CPS;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using namespace </span>std;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="foldopen" id="foldopen00018" data-start="{" data-end="}">
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a528a30589ce100d272b3fa106de1fdba">   18</a></span><a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a528a30589ce100d272b3fa106de1fdba">DP::Ph3::SynchronGeneratorDQ::SynchronGeneratorDQ</a>(String <a class="code hl_function" href="class_c_p_s_1_1_identified_object.html#a66b765f33341283bc9b916c74047c749">uid</a>, String name,</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>                                                  Logger::Level logLevel)</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>    : <a class="code hl_function" href="class_c_p_s_1_1_m_n_a_sim_power_comp.html#ab9f66bb4639c7d0d73b47cef6be789c5">MNASimPowerComp</a>&lt;Complex&gt;(<a class="code hl_function" href="class_c_p_s_1_1_identified_object.html#a66b765f33341283bc9b916c74047c749">uid</a>, name, true, true, logLevel),</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>      Base::<a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a456dfa6f189c9f7a321de9c1b3feea16">SynchronGenerator</a>(<a class="code hl_variable" href="class_c_p_s_1_1_identified_object.html#af7497f9b94a45040b1601ac58f5e3d97">mAttributes</a>) {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>  mPhaseType = PhaseType::ABC;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>  setTerminalNumber(1);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_sim_power_comp.html#a7210276935119e370dfb1f98d02c3a9a">mIntfVoltage</a> = MatrixComp::Zero(3, 1);</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_sim_power_comp.html#a141d3e207fff12a4808e3f562a99fda1">mIntfCurrent</a> = MatrixComp::Zero(3, 1);</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>}</div>
</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="foldopen" id="foldopen00028" data-start="{" data-end="}">
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a7029dafa5cd42217acd1119c4de454e7">   28</a></span><a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a528a30589ce100d272b3fa106de1fdba">DP::Ph3::SynchronGeneratorDQ::SynchronGeneratorDQ</a>(String name,</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>                                                  Logger::Level logLevel)</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    : <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a528a30589ce100d272b3fa106de1fdba">SynchronGeneratorDQ</a>(name, name, logLevel) {}</div>
</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>DP::Ph3::SynchronGeneratorDQ::~SynchronGeneratorDQ() {}</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="foldopen" id="foldopen00034" data-start="{" data-end="}">
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#af8f52d42f9c9264654c5750b6b573b5e">   34</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#af8f52d42f9c9264654c5750b6b573b5e">DP::Ph3::SynchronGeneratorDQ::setParametersFundamentalPerUnit</a>(</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    Real nomPower, Real nomVolt, Real nomFreq, Int poleNumber, Real nomFieldCur,</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd, Real Rkd,</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2, Real inertia,</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    Real initActivePower, Real initReactivePower, Real initTerminalVolt,</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    Real initVoltAngle, Real initMechPower) {</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a9ac3b83196f52f4014e8476485b38f60">Base::SynchronGenerator::setBaseAndFundamentalPerUnitParameters</a>(</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>      nomPower, nomVolt, nomFreq, nomFieldCur, poleNumber, Rs, Ll, Lmd, Lmq,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>      Rfd, Llfd, Rkd, Llkd, Rkq1, Llkq1, Rkq2, Llkq2, inertia);</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  Base::SynchronGenerator::setInitialValues(initActivePower, initReactivePower,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                                            initTerminalVolt, initVoltAngle,</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>                                            initMechPower);</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>}</div>
</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="foldopen" id="foldopen00049" data-start="{" data-end="}">
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#ac8279ef096d42865565fa62f57ea023d">   49</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a37ccc73351116685189cc870e0f98605">DP::Ph3::SynchronGeneratorDQ::initialize</a>(Matrix frequencies) {</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  <a class="code hl_function" href="class_c_p_s_1_1_sim_power_comp.html#a69a018f851bb62cf5147e25a93f2cb2c">SimPowerComp&lt;Complex&gt;::initialize</a>(frequencies);</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a0f61513fafc98996d8d8bb95dcd1172d">mSystemOmega</a> = frequencies(0, 0);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  <span class="comment">// #### Compensation ####</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3702eee61c26f7ff16106337e0f8c589">mCompensationOn</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  <a class="code hl_variable" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#ae116e42a97dc110ca8802ba47e6aa5dc">mCompensationCurrent</a> = MatrixComp::Zero(3, 1);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  <span class="comment">// Calculate real compensation resistance from per unit</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a1a288163be45fdc1a235bbc943ff7c62">mRcomp</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a1a288163be45fdc1a235bbc943ff7c62">mRcomp</a> * <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d0af7de4f71f445986ad16049d65128">mBase_Z</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <span class="comment">// #### General setup ####</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="comment">// Create matrices for state space representation</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  calcStateSpaceMatrixDQ();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  <span class="comment">// steady state per unit initial value</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <a class="code hl_function" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe2b767d31048ccca010e6568c4a1474">initPerUnitStates</a>();</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab6f6bb11b5262cdc4620f3acf88c950c">mVdq0</a> = Matrix::Zero(3, 1);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a8757190b082a217f898fbe30c442fe75">mIdq0</a> = Matrix::Zero(3, 1);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad3d3c246dac87ab59173cda6843d8773">mNumDampingWindings</a> == 2) {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab6f6bb11b5262cdc4620f3acf88c950c">mVdq0</a> &lt;&lt; <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(0, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(3, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(6, 0);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a8757190b082a217f898fbe30c442fe75">mIdq0</a> &lt;&lt; <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(0, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(3, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(6, 0);</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab6f6bb11b5262cdc4620f3acf88c950c">mVdq0</a> &lt;&lt; <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(0, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(3, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">mVsr</a>(5, 0);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a8757190b082a217f898fbe30c442fe75">mIdq0</a> &lt;&lt; <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(0, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(3, 0), <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">mIsr</a>(5, 0);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_sim_power_comp.html#a7210276935119e370dfb1f98d02c3a9a">mIntfVoltage</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">mBase_V</a> * <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#afdd005437f1b952fdbab90b9f4f1f03f">dq0ToAbcTransform</a>(<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a26979017f3a1afeff72d962903396dce">mThetaMech</a>, <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab6f6bb11b5262cdc4620f3acf88c950c">mVdq0</a>);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  **<a class="code hl_variable" href="class_c_p_s_1_1_sim_power_comp.html#a141d3e207fff12a4808e3f562a99fda1">mIntfCurrent</a> = <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">mBase_I</a> * <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#afdd005437f1b952fdbab90b9f4f1f03f">dq0ToAbcTransform</a>(<a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a26979017f3a1afeff72d962903396dce">mThetaMech</a>, <a class="code hl_variable" href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a8757190b082a217f898fbe30c442fe75">mIdq0</a>);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>}</div>
</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keywordtype">void</span> DP::Ph3::SynchronGeneratorDQ::mnaCompApplySystemMatrixStamp(</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    SparseMatrixRow &amp;systemMatrix) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <span class="keywordflow">if</span> (!mCompensationOn)</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  Real conductance = 1. / mRcomp;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <span class="keywordflow">if</span> (terminalNotGrounded(0)) {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    Math::addToMatrixElement(systemMatrix, matrixNodeIndices(0)[0],</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                             matrixNodeIndices(0)[0], Complex(conductance, 0));</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    Math::addToMatrixElement(systemMatrix, matrixNodeIndices(0)[1],</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>                             matrixNodeIndices(0)[1], Complex(conductance, 0));</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    Math::addToMatrixElement(systemMatrix, matrixNodeIndices(0)[2],</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                             matrixNodeIndices(0)[2], Complex(conductance, 0));</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    SPDLOG_LOGGER_INFO(mSLog, <span class="stringliteral">&quot;Add {} to {}, {}&quot;</span>, conductance,</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                       matrixNodeIndices(0)[0], matrixNodeIndices(0)[0]);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    SPDLOG_LOGGER_INFO(mSLog, <span class="stringliteral">&quot;Add {} to {}, {}&quot;</span>, conductance,</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                       matrixNodeIndices(0)[1], matrixNodeIndices(0)[1]);</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    SPDLOG_LOGGER_INFO(mSLog, <span class="stringliteral">&quot;Add {} to {}, {}&quot;</span>, conductance,</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                       matrixNodeIndices(0)[2], matrixNodeIndices(0)[2]);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  }</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>}</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="keywordtype">void</span> DP::Ph3::SynchronGeneratorDQ::mnaCompApplyRightSideVectorStamp(</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    Matrix &amp;rightVector) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keywordflow">if</span> (mCompensationOn)</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    mCompensationCurrent = **mIntfVoltage / mRcomp;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  <span class="comment">// If the interface current is positive, it is flowing out of the connected node and into ground.</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  <span class="comment">// Therefore, the generator is interfaced as a consumer but since the currents are reversed the equations</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="comment">// are in generator mode.</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  <span class="keywordflow">if</span> (terminalNotGrounded(0)) {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    Math::setVectorElement(rightVector, matrixNodeIndex(0, 0),</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                           -(**mIntfCurrent)(0, 0) +</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                               mCompensationCurrent(0, 0));</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    Math::setVectorElement(rightVector, matrixNodeIndex(0, 1),</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                           -(**mIntfCurrent)(1, 0) +</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                               mCompensationCurrent(1, 0));</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    Math::setVectorElement(rightVector, matrixNodeIndex(0, 2),</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                           -(**mIntfCurrent)(2, 0) +</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                               mCompensationCurrent(2, 0));</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>}</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="foldopen" id="foldopen00124" data-start="{" data-end="}">
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a8261256d8c28c6b0e1a72b9ae68ee4be">  124</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a8261256d8c28c6b0e1a72b9ae68ee4be">DP::Ph3::SynchronGeneratorDQ::mnaCompUpdateVoltage</a>(</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keyword">const</span> Matrix &amp;leftVector) {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  (**mIntfVoltage)(0, 0) =</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      Math::complexFromVectorElement(leftVector, matrixNodeIndex(0, 0));</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  (**mIntfVoltage)(1, 0) =</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      Math::complexFromVectorElement(leftVector, matrixNodeIndex(0, 1));</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  (**mIntfVoltage)(2, 0) =</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      Math::complexFromVectorElement(leftVector, matrixNodeIndex(0, 2));</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>}</div>
</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="foldopen" id="foldopen00134" data-start="{" data-end="}">
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a979468e6807fa35d06f0cff8d7af12cb">  134</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a979468e6807fa35d06f0cff8d7af12cb">DP::Ph3::SynchronGeneratorDQ::mnaCompAddPostStepDependencies</a>(</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    AttributeBase::List &amp;prevStepDependencies,</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    AttributeBase::List &amp;attributeDependencies,</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    AttributeBase::List &amp;modifiedAttributes,</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    Attribute&lt;Matrix&gt;::Ptr &amp;leftVector) {</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  attributeDependencies.push_back(leftVector);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  modifiedAttributes.push_back(<a class="code hl_variable" href="class_c_p_s_1_1_sim_power_comp.html#a7210276935119e370dfb1f98d02c3a9a">mIntfVoltage</a>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>}</div>
</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="keywordtype">void</span> DP::Ph3::SynchronGeneratorDQ::mnaCompPostStep(</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    Real time, Int timeStepCount, Attribute&lt;Matrix&gt;::Ptr &amp;leftVector) {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  mnaCompUpdateVoltage(**leftVector);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>Real DP::Ph3::SynchronGeneratorDQ::electricalTorque()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <span class="keywordflow">return</span> **mElecTorque * mBase_T;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>}</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>Real DP::Ph3::SynchronGeneratorDQ::rotationalSpeed()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keywordflow">return</span> **mOmMech * mBase_OmMech;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>}</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>Real DP::Ph3::SynchronGeneratorDQ::rotorPosition()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mThetaMech; }</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="foldopen" id="foldopen00158" data-start="{" data-end="}">
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a9b887e9c2c5b8df5cc86426bfa80146c">  158</a></span>Matrix <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a9b887e9c2c5b8df5cc86426bfa80146c">DP::Ph3::SynchronGeneratorDQ::abcToDq0Transform</a>(Real theta,</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                                                       MatrixComp &amp;abcVector) {</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="comment">// Balanced case because we do not return the zero sequence component</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  Complex alpha(cos(2. / 3. * PI), sin(2. / 3. * PI));</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  Complex thetaCompInv(cos(-theta), sin(-theta));</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  MatrixComp abcToPnz(3, 3);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  abcToPnz &lt;&lt; 1, 1, 1, 1, alpha, pow(alpha, 2), 1, pow(alpha, 2), alpha;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  abcToPnz = (1. / 3.) * abcToPnz;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  MatrixComp pnzVector(3, 1);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  pnzVector = abcToPnz * abcVector * thetaCompInv;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  Matrix dq0Vector(3, 1);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  dq0Vector &lt;&lt; pnzVector(1, 0).real(), pnzVector(1, 0).imag(), 0;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  <span class="keywordflow">return</span> dq0Vector;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="foldopen" id="foldopen00177" data-start="{" data-end="}">
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#afdd005437f1b952fdbab90b9f4f1f03f">  177</a></span>MatrixComp <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#afdd005437f1b952fdbab90b9f4f1f03f">DP::Ph3::SynchronGeneratorDQ::dq0ToAbcTransform</a>(Real theta,</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                                                           Matrix &amp;dq0) {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="comment">// Balanced case because we do not consider the zero sequence component</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  Complex alpha(cos(2. / 3. * PI), sin(2. / 3. * PI));</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  Complex thetaComp(cos(theta), sin(theta));</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <span class="comment">// Matrix to transform from symmetrical components to ABC</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  MatrixComp pnzToAbc(3, 3);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  pnzToAbc &lt;&lt; 1, 1, 1, 1, pow(alpha, 2), alpha, 1, alpha, pow(alpha, 2);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <span class="comment">// Symmetrical components vector</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  MatrixComp pnzVector(3, 1);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="comment">// Picking only d and q for positive sequence component</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  pnzVector &lt;&lt; 0, Complex(dq0(0, 0), dq0(1, 0)), 0;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="comment">// ABC vector</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  MatrixComp abcCompVector(3, 1);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  abcCompVector = pnzToAbc * pnzVector * thetaComp;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  <span class="keywordflow">return</span> abcCompVector;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>}</div>
</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a682339bdc0780fcbe11a5dfeca88773c">  196</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a682339bdc0780fcbe11a5dfeca88773c">DP::Ph3::SynchronGeneratorDQ::trapezoidalFluxStates</a>() {}</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="keywordtype">void</span> DP::Ph3::SynchronGeneratorDQ::trapezoidalCurrentStates() {}</div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a03f4a70f1d448200321dc0fdf0a01981"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a03f4a70f1d448200321dc0fdf0a01981">CPS::Base::SynchronGenerator::mIsr</a></div><div class="ttdeci">Matrix mIsr</div><div class="ttdoc">Vector of stator and rotor currents.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00219">Base_SynchronGenerator.h:219</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a0f61513fafc98996d8d8bb95dcd1172d"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a0f61513fafc98996d8d8bb95dcd1172d">CPS::Base::SynchronGenerator::mSystemOmega</a></div><div class="ttdeci">Real mSystemOmega</div><div class="ttdoc">Simulation angular system speed.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00047">Base_SynchronGenerator.h:47</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a1a288163be45fdc1a235bbc943ff7c62"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a1a288163be45fdc1a235bbc943ff7c62">CPS::Base::SynchronGenerator::mRcomp</a></div><div class="ttdeci">Real mRcomp</div><div class="ttdoc">Compensation Resistance.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00256">Base_SynchronGenerator.h:256</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a252ecc59be9dfadb9dde6d74c018780d"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a252ecc59be9dfadb9dde6d74c018780d">CPS::Base::SynchronGenerator::mBase_I</a></div><div class="ttdeci">Real mBase_I</div><div class="ttdoc">base stator current peak</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00144">Base_SynchronGenerator.h:144</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a26979017f3a1afeff72d962903396dce"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a26979017f3a1afeff72d962903396dce">CPS::Base::SynchronGenerator::mThetaMech</a></div><div class="ttdeci">Real mThetaMech</div><div class="ttdoc">theta</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00179">Base_SynchronGenerator.h:179</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a3702eee61c26f7ff16106337e0f8c589"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a3702eee61c26f7ff16106337e0f8c589">CPS::Base::SynchronGenerator::mCompensationOn</a></div><div class="ttdeci">Bool mCompensationOn</div><div class="ttdoc">Determines if compensation elements are used.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00254">Base_SynchronGenerator.h:254</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a456dfa6f189c9f7a321de9c1b3feea16"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a456dfa6f189c9f7a321de9c1b3feea16">CPS::Base::SynchronGenerator::SynchronGenerator</a></div><div class="ttdeci">SynchronGenerator(CPS::AttributeList::Ptr attributeList)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00273">Base_SynchronGenerator.h:273</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a66db7a71580419f6f442557ae1de4b49"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a66db7a71580419f6f442557ae1de4b49">CPS::Base::SynchronGenerator::mVsr</a></div><div class="ttdeci">Matrix mVsr</div><div class="ttdoc">Vector of stator and rotor voltages.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00209">Base_SynchronGenerator.h:209</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a6d0af7de4f71f445986ad16049d65128"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a6d0af7de4f71f445986ad16049d65128">CPS::Base::SynchronGenerator::mBase_Z</a></div><div class="ttdeci">Real mBase_Z</div><div class="ttdoc">base stator impedance</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00148">Base_SynchronGenerator.h:148</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a8757190b082a217f898fbe30c442fe75"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a8757190b082a217f898fbe30c442fe75">CPS::Base::SynchronGenerator::mIdq0</a></div><div class="ttdeci">Matrix mIdq0</div><div class="ttdoc">dq0 current calculated from terminal current</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00237">Base_SynchronGenerator.h:237</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_a9ac3b83196f52f4014e8476485b38f60"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#a9ac3b83196f52f4014e8476485b38f60">CPS::Base::SynchronGenerator::setBaseAndFundamentalPerUnitParameters</a></div><div class="ttdeci">void setBaseAndFundamentalPerUnitParameters(Real nomPower, Real nomVolt, Real nomFreq, Real nomFieldCur, Int poleNumber, Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd, Real Rkd, Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2, Real inertia)</div><div class="ttdoc">Initializes the base and fundamental machine parameters in per unit.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8cpp_source.html#l00042">Base_SynchronGenerator.cpp:42</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ab6f6bb11b5262cdc4620f3acf88c950c"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ab6f6bb11b5262cdc4620f3acf88c950c">CPS::Base::SynchronGenerator::mVdq0</a></div><div class="ttdeci">Matrix mVdq0</div><div class="ttdoc">dq0 voltage calculated from terminal voltage</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00235">Base_SynchronGenerator.h:235</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_abe2b767d31048ccca010e6568c4a1474"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#abe2b767d31048ccca010e6568c4a1474">CPS::Base::SynchronGenerator::initPerUnitStates</a></div><div class="ttdeci">void initPerUnitStates()</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8cpp_source.html#l00227">Base_SynchronGenerator.cpp:227</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ad3d3c246dac87ab59173cda6843d8773"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad3d3c246dac87ab59173cda6843d8773">CPS::Base::SynchronGenerator::mNumDampingWindings</a></div><div class="ttdeci">Int mNumDampingWindings</div><div class="ttdoc">Number of damping windings in q.</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00069">Base_SynchronGenerator.h:69</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_base_1_1_synchron_generator_html_ad4ae7afe556b5ccfa16e60862ee14540"><div class="ttname"><a href="class_c_p_s_1_1_base_1_1_synchron_generator.html#ad4ae7afe556b5ccfa16e60862ee14540">CPS::Base::SynchronGenerator::mBase_V</a></div><div class="ttdeci">Real mBase_V</div><div class="ttdoc">base stator voltage (phase-to-ground peak)</div><div class="ttdef"><b>Definition</b> <a href="_base___synchron_generator_8h_source.html#l00140">Base_SynchronGenerator.h:140</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a37ccc73351116685189cc870e0f98605"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a37ccc73351116685189cc870e0f98605">CPS::DP::Ph3::SynchronGeneratorDQ::initialize</a></div><div class="ttdeci">void initialize(Real omega, Real timeStep)</div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a528a30589ce100d272b3fa106de1fdba"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a528a30589ce100d272b3fa106de1fdba">CPS::DP::Ph3::SynchronGeneratorDQ::SynchronGeneratorDQ</a></div><div class="ttdeci">SynchronGeneratorDQ(String name, String uid, Logger::Level logLevel=Logger::Level::off)</div><div class="ttdoc">Defines UID, name and logging level.</div><div class="ttdef"><b>Definition</b> <a href="#l00018">DP_Ph3_SynchronGeneratorDQ.cpp:18</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a682339bdc0780fcbe11a5dfeca88773c"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a682339bdc0780fcbe11a5dfeca88773c">CPS::DP::Ph3::SynchronGeneratorDQ::trapezoidalFluxStates</a></div><div class="ttdeci">void trapezoidalFluxStates()</div><div class="ttdoc">calculate flux states using trapezoidal rule - depcrecated</div><div class="ttdef"><b>Definition</b> <a href="#l00196">DP_Ph3_SynchronGeneratorDQ.cpp:196</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a8261256d8c28c6b0e1a72b9ae68ee4be"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a8261256d8c28c6b0e1a72b9ae68ee4be">CPS::DP::Ph3::SynchronGeneratorDQ::mnaCompUpdateVoltage</a></div><div class="ttdeci">virtual void mnaCompUpdateVoltage(const Matrix &amp;leftVector) override</div><div class="ttdoc">Retrieves calculated voltage from simulation for next step.</div><div class="ttdef"><b>Definition</b> <a href="#l00124">DP_Ph3_SynchronGeneratorDQ.cpp:124</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a979468e6807fa35d06f0cff8d7af12cb"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a979468e6807fa35d06f0cff8d7af12cb">CPS::DP::Ph3::SynchronGeneratorDQ::mnaCompAddPostStepDependencies</a></div><div class="ttdeci">void mnaCompAddPostStepDependencies(AttributeBase::List &amp;prevStepDependencies, AttributeBase::List &amp;attributeDependencies, AttributeBase::List &amp;modifiedAttributes, Attribute&lt; Matrix &gt;::Ptr &amp;leftVector) override</div><div class="ttdoc">Add MNA post step dependencies.</div><div class="ttdef"><b>Definition</b> <a href="#l00134">DP_Ph3_SynchronGeneratorDQ.cpp:134</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_a9b887e9c2c5b8df5cc86426bfa80146c"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#a9b887e9c2c5b8df5cc86426bfa80146c">CPS::DP::Ph3::SynchronGeneratorDQ::abcToDq0Transform</a></div><div class="ttdeci">Matrix abcToDq0Transform(Real theta, MatrixComp &amp;abc)</div><div class="ttdoc">Park transform as described in Krause.</div><div class="ttdef"><b>Definition</b> <a href="#l00158">DP_Ph3_SynchronGeneratorDQ.cpp:158</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_ae116e42a97dc110ca8802ba47e6aa5dc"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#ae116e42a97dc110ca8802ba47e6aa5dc">CPS::DP::Ph3::SynchronGeneratorDQ::mCompensationCurrent</a></div><div class="ttdeci">MatrixComp mCompensationCurrent</div><div class="ttdoc">Compensation current source set point.</div><div class="ttdef"><b>Definition</b> <a href="_d_p___ph3___synchron_generator_d_q_8h_source.html#l00023">DP_Ph3_SynchronGeneratorDQ.h:23</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_af8f52d42f9c9264654c5750b6b573b5e"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#af8f52d42f9c9264654c5750b6b573b5e">CPS::DP::Ph3::SynchronGeneratorDQ::setParametersFundamentalPerUnit</a></div><div class="ttdeci">void setParametersFundamentalPerUnit(Real nomPower, Real nomVolt, Real nomFreq, Int poleNumber, Real nomFieldCur, Real Rs, Real Ll, Real Lmd, Real Lmq, Real Rfd, Real Llfd, Real Rkd, Real Llkd, Real Rkq1, Real Llkq1, Real Rkq2, Real Llkq2, Real inertia, Real initActivePower, Real initReactivePower, Real initTerminalVolt, Real initVoltAngle, Real initMechPower)</div><div class="ttdef"><b>Definition</b> <a href="#l00034">DP_Ph3_SynchronGeneratorDQ.cpp:34</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q_html_afdd005437f1b952fdbab90b9f4f1f03f"><div class="ttname"><a href="class_c_p_s_1_1_d_p_1_1_ph3_1_1_synchron_generator_d_q.html#afdd005437f1b952fdbab90b9f4f1f03f">CPS::DP::Ph3::SynchronGeneratorDQ::dq0ToAbcTransform</a></div><div class="ttdeci">MatrixComp dq0ToAbcTransform(Real theta, Matrix &amp;dq0)</div><div class="ttdoc">Inverse Park transform as described in Krause.</div><div class="ttdef"><b>Definition</b> <a href="#l00177">DP_Ph3_SynchronGeneratorDQ.cpp:177</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_identified_object_html_a66b765f33341283bc9b916c74047c749"><div class="ttname"><a href="class_c_p_s_1_1_identified_object.html#a66b765f33341283bc9b916c74047c749">CPS::IdentifiedObject::uid</a></div><div class="ttdeci">String uid()</div><div class="ttdoc">Returns unique id.</div><div class="ttdef"><b>Definition</b> <a href="_identified_object_8h_source.html#l00061">IdentifiedObject.h:61</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_identified_object_html_af7497f9b94a45040b1601ac58f5e3d97"><div class="ttname"><a href="class_c_p_s_1_1_identified_object.html#af7497f9b94a45040b1601ac58f5e3d97">CPS::IdentifiedObject::mAttributes</a></div><div class="ttdeci">AttributeList::Ptr mAttributes</div><div class="ttdoc">Attribute List.</div><div class="ttdef"><b>Definition</b> <a href="_identified_object_8h_source.html#l00022">IdentifiedObject.h:22</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_m_n_a_sim_power_comp_html_ab9f66bb4639c7d0d73b47cef6be789c5"><div class="ttname"><a href="class_c_p_s_1_1_m_n_a_sim_power_comp.html#ab9f66bb4639c7d0d73b47cef6be789c5">CPS::MNASimPowerComp&lt; Complex &gt;::MNASimPowerComp</a></div><div class="ttdeci">MNASimPowerComp(String uid, String name, Bool hasPreStep, Bool hasPostStep, Logger::Level logLevel)</div><div class="ttdef"><b>Definition</b> <a href="_m_n_a_sim_power_comp_8h_source.html#l00032">MNASimPowerComp.h:32</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_sim_power_comp_html_a141d3e207fff12a4808e3f562a99fda1"><div class="ttname"><a href="class_c_p_s_1_1_sim_power_comp.html#a141d3e207fff12a4808e3f562a99fda1">CPS::SimPowerComp&lt; Complex &gt;::mIntfCurrent</a></div><div class="ttdeci">const Attribute&lt; MatrixVar&lt; Complex &gt; &gt;::Ptr mIntfCurrent</div><div class="ttdef"><b>Definition</b> <a href="_sim_power_comp_8h_source.html#l00047">SimPowerComp.h:47</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_sim_power_comp_html_a69a018f851bb62cf5147e25a93f2cb2c"><div class="ttname"><a href="class_c_p_s_1_1_sim_power_comp.html#a69a018f851bb62cf5147e25a93f2cb2c">CPS::SimPowerComp::initialize</a></div><div class="ttdeci">virtual void initialize(Matrix frequencies)</div><div class="ttdoc">Initialize components with correct network frequencies.</div><div class="ttdef"><b>Definition</b> <a href="_sim_power_comp_8cpp_source.html#l00286">SimPowerComp.cpp:286</a></div></div>
<div class="ttc" id="aclass_c_p_s_1_1_sim_power_comp_html_a7210276935119e370dfb1f98d02c3a9a"><div class="ttname"><a href="class_c_p_s_1_1_sim_power_comp.html#a7210276935119e370dfb1f98d02c3a9a">CPS::SimPowerComp&lt; Complex &gt;::mIntfVoltage</a></div><div class="ttdeci">const Attribute&lt; MatrixVar&lt; Complex &gt; &gt;::Ptr mIntfVoltage</div><div class="ttdef"><b>Definition</b> <a href="_sim_power_comp_8h_source.html#l00045">SimPowerComp.h:45</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
